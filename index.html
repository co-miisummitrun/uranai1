<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-site-verification" content="vQkgsiI6ESyUE4NxB11bOJWI2j2tAi0MYAKGw4ZHCb8" />
    
    <title>ç·åˆå ã„ã‚µãƒ­ãƒ³ æ˜Ÿå±‘ã®ç¥è¨— | æœ¬æ ¼éœŠè¦–ãƒ»ã‚¿ãƒ­ãƒƒãƒˆãƒ»AIæ‰‹ç›¸</title>
    <meta name="description" content="ãƒ—ãƒ­ã®é‘‘å®šå£«ã«ã‚ˆã‚‹æœ¬ç‰©ã®å ã„ã€‚ã‚¿ãƒ­ãƒƒãƒˆã€é­‚ã®å¥¥åº•ã‚’é€è¦–ã™ã‚‹ãƒ„ã‚¤ãƒ³ãƒ¬ã‚¤é‘‘å®šã€AIæ‰‹ç›¸ã‚¹ã‚­ãƒ£ãƒ³ã€è¶…æœ¬æ ¼ã‚¿ãƒ­ãƒƒãƒˆã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã€‚">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Shippori+Mincho:wght@400;500;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --gold: #d4af37; --gold-light: #f9e5b5; --gold-dark: #a67c00;
            --bg-dark: #07040a; --bg-glass: rgba(15, 10, 22, 0.85);
            --border-glow: rgba(212, 175, 55, 0.3);
            --text-main: #f0ebe1; --text-sub: #b3a8c4;
            --accent-love: #c95b7a; --accent-palm: #20b2aa; --accent-tarot: #9b59b6;
        }
        
        body {
            margin: 0; padding: 0; min-height: 100vh;
            display: flex; flex-direction: column; align-items: center; justify-content: flex-start;
            background-color: var(--bg-dark);
            background-image: radial-gradient(circle at 20% 30%, rgba(45, 25, 75, 0.5), transparent 50%), radial-gradient(circle at 80% 70%, rgba(20, 30, 60, 0.4), transparent 50%);
            font-family: 'Shippori Mincho', serif; color: var(--text-main);
            box-sizing: border-box; overflow-x: hidden; line-height: 1.8; background-attachment: fixed;
        }

        ::-webkit-scrollbar { width: 5px; } ::-webkit-scrollbar-track { background: var(--bg-dark); } ::-webkit-scrollbar-thumb { background: var(--gold-dark); border-radius: 3px; }

        .stars-bg { position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: -1; pointer-events: none; background-image: radial-gradient(1px 1px at 15% 25%, #fff, transparent), radial-gradient(1.5px 1.5px at 40% 65%, rgba(255,255,255,0.8), transparent), radial-gradient(1px 1px at 75% 35%, #fff, transparent), radial-gradient(2px 2px at 85% 85%, rgba(212,175,55,0.6), transparent); background-size: 250px 250px; animation: drift 80s linear infinite; opacity: 0.5; }
        @keyframes drift { from { transform: translateY(0); } to { transform: translateY(-250px); } }

        /* ====== ãƒšãƒ¼ã‚¸åˆ‡ã‚Šæ›¿ãˆ ====== */
        .page-wrapper { width: 100%; max-width: 800px; padding: 40px 10px; box-sizing: border-box; display: none; animation: fadeIn 0.8s ease; }
        .page-wrapper.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }

        /* ====== TOPãƒšãƒ¼ã‚¸ (ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸) ====== */
        .hero-section { text-align: center; padding: 20px 0 40px; }
        .hero-title-en { font-family: 'Cinzel', serif; font-size: 38px; color: var(--gold); letter-spacing: 8px; margin-bottom: 5px; text-shadow: 0 0 20px rgba(212,175,55,0.5); font-weight: 700;}
        .hero-title-ja { font-size: 22px; color: #fff; letter-spacing: 6px; margin-bottom: 20px; font-weight: 700; }
        .hero-desc { font-size: 14.5px; color: var(--text-sub); max-width: 600px; margin: 0 auto 40px; line-height: 2.2; letter-spacing: 1px; }

        /* æ‰€å±é‘‘å®šå£«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ (è±ªè¯ä»•æ§˜) */
        .top-advisors-section { margin-bottom: 50px; }
        .sect-title { text-align: center; font-family: 'Cinzel', serif; font-size: 20px; color: var(--gold); margin-bottom: 30px; letter-spacing: 4px; border-bottom: 1px solid rgba(212,175,55,0.3); padding-bottom: 15px; display: inline-block; width: 100%;}
        .sect-title span { font-family: 'Shippori Mincho', serif; font-size: 12px; display: block; margin-top: 5px; color: var(--text-sub); letter-spacing: 2px;}
        
        .adv-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
        @media (min-width: 600px) { .adv-grid { grid-template-columns: repeat(4, 1fr); } }
        
        .adv-card { background: rgba(10,5,15,0.6); border: 1px solid rgba(255,255,255,0.05); border-radius: 12px; padding: 20px 10px; text-align: center; transition: 0.4s; box-shadow: 0 5px 15px rgba(0,0,0,0.5); position: relative; overflow: hidden; }
        .adv-card::before { content:""; position:absolute; top:0; left:0; width:100%; height:3px; background: var(--gold); opacity: 0; transition: 0.4s; }
        .adv-card:hover { transform: translateY(-5px); background: rgba(20,10,30,0.8); border-color: rgba(212,175,55,0.3); box-shadow: 0 15px 30px rgba(0,0,0,0.8); }
        .adv-card:hover::before { opacity: 1; }
        
        /* é‘‘å®šå£«åˆ¥ã‚«ãƒ©ãƒ¼ */
        .ac-2::before { background: var(--accent-love); } .ac-2:hover { border-color: rgba(201,91,122,0.3); }
        .ac-3::before { background: var(--accent-palm); } .ac-3:hover { border-color: rgba(32,178,170,0.3); }
        .ac-4::before { background: var(--accent-tarot); } .ac-4:hover { border-color: rgba(155,89,182,0.3); }

        .adv-img-wrap { width: 80px; height: 80px; margin: 0 auto 15px; border-radius: 50%; padding: 3px; background: linear-gradient(135deg, var(--gold), #222); box-shadow: 0 0 15px rgba(212,175,55,0.2); }
        .ac-2 .adv-img-wrap { background: linear-gradient(135deg, var(--accent-love), #222); box-shadow: 0 0 15px rgba(201,91,122,0.2); }
        .ac-3 .adv-img-wrap { background: linear-gradient(135deg, var(--accent-palm), #222); box-shadow: 0 0 15px rgba(32,178,170,0.2); }
        .ac-4 .adv-img-wrap { background: linear-gradient(135deg, var(--accent-tarot), #222); box-shadow: 0 0 15px rgba(155,89,182,0.2); }
        
        .adv-img { width: 100%; height: 100%; object-fit: cover; border-radius: 50%; background: #111;}
        .adv-card-role { font-size: 10px; color: var(--gold); letter-spacing: 1px; margin-bottom: 5px; font-weight: bold;}
        .ac-2 .adv-card-role { color: var(--accent-love); } .ac-3 .adv-card-role { color: var(--accent-palm); } .ac-4 .adv-card-role { color: var(--accent-tarot); }
        .adv-card-name { font-size: 14px; color: #fff; font-weight: bold; letter-spacing: 1px;}

        .enter-btn-wrap { text-align: center; padding: 10px 0 50px; }
        .enter-btn { display: inline-block; padding: 22px 60px; font-size: 17px; font-weight: 700; letter-spacing: 4px; color: #000; background: linear-gradient(135deg, var(--gold-dark), var(--gold-light), var(--gold-dark)); background-size: 200% auto; border: none; border-radius: 50px; cursor: pointer; transition: 0.5s; box-shadow: 0 10px 30px rgba(212,175,55,0.4); text-decoration: none; font-family: inherit; }
        .enter-btn:hover { background-position: right center; transform: scale(1.05); box-shadow: 0 15px 40px rgba(212,175,55,0.6); }

        /* ====== å ã„ã‚¢ãƒ—ãƒªç”»é¢ ====== */
        .tab-container { display: flex; width: 100%; margin-bottom: 20px; background: rgba(0,0,0,0.6); border-radius: 8px; border: 1px solid rgba(255,255,255,0.05); overflow: hidden; backdrop-filter: blur(10px); box-shadow: 0 10px 30px rgba(0,0,0,0.8); }
        .tab-btn { flex: 1; padding: 12px 0; text-align: center; cursor: pointer; font-size: 12px; font-weight: 600; color: var(--text-sub); background: transparent; border: none; border-right: 1px solid rgba(255,255,255,0.05); transition: 0.4s; letter-spacing: 1px; }
        .tab-btn:last-child { border-right: none; }
        .tab-btn:hover { color: var(--gold-light); background: rgba(255,255,255,0.05); }
        .tab-btn span { font-size: 9px; font-weight: normal; display: block; margin-top: 2px;}
        
        .tab-btn.active.t-daily { color: var(--gold); background: linear-gradient(180deg, rgba(212,175,55,0.15) 0%, transparent 100%); border-bottom: 2px solid var(--gold);}
        .tab-btn.active.t-destiny { color: var(--accent-love); background: linear-gradient(180deg, rgba(201,91,122,0.15) 0%, transparent 100%); border-bottom: 2px solid var(--accent-love);}
        .tab-btn.active.t-palm { color: var(--accent-palm); background: linear-gradient(180deg, rgba(32,178,170,0.15) 0%, transparent 100%); border-bottom: 2px solid var(--accent-palm);}
        .tab-btn.active.t-tarot { color: var(--accent-tarot); background: linear-gradient(180deg, rgba(155,89,182,0.15) 0%, transparent 100%); border-bottom: 2px solid var(--accent-tarot);}

        .glass-panel { background: var(--bg-glass); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px); border: 1px solid rgba(255,255,255,0.08); border-top: 1px solid var(--border-glow); border-radius: 12px; padding: 35px 25px; width: 100%; margin-bottom: 40px; box-shadow: 0 25px 50px rgba(0,0,0,0.9), inset 0 0 20px rgba(212,175,55,0.05); box-sizing: border-box; }

        /* é‘‘å®šç”»é¢ãƒ»å ã„å¸«ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« */
        .advisor-profile { display: flex; flex-direction: column; align-items: center; text-align: center; margin-bottom: 30px; padding-bottom: 25px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .advisor-photo-wrapper { position: relative; width: 110px; height: 110px; margin-bottom: 20px; border-radius: 50%; padding: 3px; background: linear-gradient(135deg, var(--gold), #222); box-shadow: 0 0 30px rgba(212,175,55,0.2); transition: 0.5s; flex-shrink: 0;}
        .advisor-photo { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; background: #111; }
        .advisor-role { font-family: 'Cinzel', serif; font-size: 11px; color: var(--gold); margin-bottom: 5px; letter-spacing: 3px; text-transform: uppercase; transition: 0.3s;}
        .advisor-name { font-size: 18px; color: #fff; font-weight: 700; margin-bottom: 10px; letter-spacing: 2px; }
        .advisor-bio { font-size: 13px; color: var(--text-sub); line-height: 1.8; text-align: justify; max-width: 500px; }
        @media (min-width: 550px) { .advisor-profile { flex-direction: row; text-align: left; align-items: center; } .advisor-photo-wrapper { margin-bottom: 0; margin-right: 25px; } }

        .site-title { font-family: 'Cinzel', serif; font-size: 26px; color: var(--gold); margin: 0 0 5px; text-align: center; letter-spacing: 5px; font-weight: 600; }
        .site-title-ja { font-size: 18px; color: #fff; text-align: center; margin: 0 0 5px; letter-spacing: 4px; font-weight: 600; }
        .site-subtitle { font-size: 11px; color: var(--text-sub); margin-bottom: 30px; text-align: center; letter-spacing: 2px; }

        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-size: 12.5px; color: var(--gold-light); letter-spacing: 1.5px; font-weight: bold;}
        .input-row { display: flex; gap: 10px; } .input-row > div { flex: 1; }
        input[type="text"], input[type="date"], select, textarea { width: 100%; padding: 14px; background: rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.15); border-radius: 6px; color: #fff; font-size: 14px; font-family: inherit; transition: 0.3s; color-scheme: dark; box-sizing: border-box;}
        textarea { resize: vertical; min-height: 90px; }
        select { appearance: none; background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%2214%22%20height%3D%2214%22%20viewBox%3D%220%200%2024%2024%22%20fill%3D%22none%22%20stroke%3D%22%23d4af37%22%20stroke-width%3D%222%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%3E%3Cpolyline%20points%3D%226%209%2012%2015%2018%209%22%3E%3C%2Fpolyline%3E%3C%2Fsvg%3E"); background-repeat: no-repeat; background-position: right 15px center; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: var(--gold); box-shadow: 0 0 15px rgba(212,175,55,0.3); background: rgba(0,0,0,0.7); }

        /* ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ (æ‰‹ç›¸ç”¨) */
        .upload-box { position: relative; border: 2px dashed rgba(32,178,170,0.4); border-radius: 8px; padding: 25px 15px; text-align: center; background: rgba(0,0,0,0.3); transition: 0.3s; cursor: pointer; overflow: hidden; margin-bottom: 10px;}
        .upload-box:hover { border-color: var(--accent-palm); background: rgba(32,178,170,0.05); }
        .upload-box input[type="file"] { position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; }
        .upload-text { color: #fff; font-size: 13px; margin: 10px 0 5px; font-weight: bold; letter-spacing: 1px;}
        
        .preview-container { display: none; margin-top: 15px; position: relative; width: 100%; max-width: 280px; margin-left: auto; margin-right: auto; border-radius: 8px; overflow: hidden; border: 1px solid var(--accent-palm); box-shadow: 0 0 20px rgba(32,178,170,0.3); background: #000;}
        .preview-img { width: 100%; display: block; filter: contrast(1.1); }
        .preview-actions { text-align: center; padding: 10px; background: rgba(0,0,0,0.5); }
        .btn-change-img { background: transparent; border: 1px solid var(--accent-palm); color: var(--accent-palm); padding: 6px 15px; border-radius: 4px; cursor: pointer; font-size: 12px; transition: 0.3s;}

        button.main-btn { width: 100%; padding: 18px; margin-top: 10px; background: linear-gradient(135deg, var(--gold-dark), var(--gold-light), var(--gold-dark)); background-size: 200% auto; color: #000; font-family: inherit; font-size: 14px; font-weight: 700; border: none; border-radius: 6px; cursor: pointer; letter-spacing: 3px; transition: 0.5s; box-shadow: 0 5px 20px rgba(0,0,0,0.6); text-transform: uppercase; }
        button.main-btn:hover { background-position: right center; box-shadow: 0 0 25px rgba(212,175,55,0.6); transform: translateY(-2px); }
        button.love-btn { background: linear-gradient(135deg, #8a2846, #c95b7a, #8a2846); color: #fff; } button.love-btn:hover { box-shadow: 0 0 25px rgba(201, 91, 122, 0.6); }
        button.palm-btn { background: linear-gradient(135deg, #0f524e, #20b2aa, #0f524e); color: #fff; } button.palm-btn:hover { box-shadow: 0 0 25px rgba(32, 178, 170, 0.6); }
        button.tarot-btn { background: linear-gradient(135deg, #4b0082, #9b59b6, #4b0082); color: #fff; } button.tarot-btn:hover { box-shadow: 0 0 25px rgba(155, 89, 182, 0.6); }

        .content-area { display: none; animation: fadeUp 0.6s cubic-bezier(0.2, 0.8, 0.2, 1); }
        .content-area.active { display: block; }
        @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒ»ã‚¹ã‚­ãƒ£ãƒ³æ¼”å‡º */
        #loading { display: none; padding: 60px 0; text-align: center; }
        .mystic-wheel { width: 90px; height: 90px; margin: 0 auto 25px; border: 1px dashed rgba(212,175,55,0.5); border-top: 2px solid var(--gold); border-bottom: 2px solid var(--gold); border-radius: 50%; position: relative; animation: spin 3s linear infinite; }
        .mystic-wheel::after { content: "âœ§"; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: var(--gold); font-size: 35px; animation: pulse 1.5s infinite alternate;}
        
        .scan-container { position: relative; width: 200px; height: 260px; margin: 0 auto 25px; border-radius: 12px; overflow: hidden; border: 1px solid rgba(32,178,170,0.5); background: #000; display: none; box-shadow: 0 0 30px rgba(32,178,170,0.2); }
        .scan-target-img { width: 100%; height: 100%; object-fit: cover; opacity: 0.5; filter: contrast(1.3) grayscale(0.5); }
        .scanner-line { position: absolute; top: 0; left: 0; width: 100%; height: 3px; background: var(--accent-palm); box-shadow: 0 0 15px 5px rgba(32,178,170,0.6); z-index: 5; animation: scanMove 2s ease-in-out infinite alternate; display: none;}
        .scan-grid { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background-image: linear-gradient(rgba(32,178,170,0.2) 1px, transparent 1px), linear-gradient(90deg, rgba(32,178,170,0.2) 1px, transparent 1px); background-size: 20px 20px; z-index: 2; pointer-events: none; }
        
        @keyframes spin { 100% { transform: rotate(360deg); } } @keyframes pulse { 100% { opacity: 0.4; transform: translate(-50%, -50%) scale(0.8); } } @keyframes scanMove { 0% { top: 0%; } 100% { top: 100%; } }
        .loading-text { font-family: 'Cinzel', serif; color: var(--gold); font-size: 14px; letter-spacing: 3px; font-weight: 600; animation: blink 1.5s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

        /* çµæœç”»é¢å…±é€š */
        .result-header { text-align: center; margin-bottom: 30px; }
        .result-name { font-size: 22px; color: #fff; font-weight: 700; letter-spacing: 2px; margin-bottom: 10px; }
        .result-meta { font-size: 12px; color: var(--gold); letter-spacing: 2px; font-family: 'Cinzel', serif; }

        .story-card { background: rgba(5,3,10,0.6); border: 1px solid rgba(255,255,255,0.05); border-radius: 8px; overflow: hidden; margin-bottom: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.6); }
        .story-img { width: 100%; height: 160px; object-fit: cover; opacity: 0.85; border-bottom: 1px solid rgba(212,175,55,0.2); }
        .love-theme .story-img { border-bottom-color: rgba(201,91,122,0.3); } .palm-theme .story-img { border-bottom-color: rgba(32,178,170,0.3); } .tarot-theme .story-img { border-bottom-color: rgba(155,89,182,0.3); }
        
        .story-content { padding: 25px 20px; position: relative; }
        .story-title { font-size: 16px; color: var(--gold); margin-bottom: 15px; font-weight: 700; letter-spacing: 1px; border-left: 3px solid var(--gold); padding-left: 12px; }
        .love-theme .story-title { color: var(--accent-love); border-left-color: var(--accent-love); } .palm-theme .story-title { color: var(--accent-palm); border-left-color: var(--accent-palm); } .tarot-theme .story-title { color: var(--accent-tarot); border-left-color: var(--accent-tarot); }
        
        .story-text { font-size: 14.5px; line-height: 2.1; color: #eaeaeb; text-align: justify; } .story-text p { margin: 0 0 18px 0; } .story-text p:last-child { margin: 0; }
        
        .highlight { color: #fff; font-weight: 700; background: linear-gradient(transparent 65%, rgba(212,175,55,0.4) 65%); }
        .love-highlight { color: #fff; font-weight: 700; background: linear-gradient(transparent 65%, rgba(201,91,122,0.5) 65%); }
        .palm-highlight { color: #fff; font-weight: 700; background: linear-gradient(transparent 65%, rgba(32,178,170,0.4) 65%); }
        .tarot-highlight { color: #fff; font-weight: 700; background: linear-gradient(transparent 65%, rgba(155,89,182,0.4) 65%); }
        .alert-text { color: #ff8e8e; font-weight: 700; border-bottom: 1px dashed #ff8e8e; }
        
        /* ğŸƒ ã‚¿ãƒ­ãƒƒãƒˆå°‚ç”¨ï¼ˆ3Dãƒ•ãƒªãƒƒãƒ—æ¼”å‡ºï¼‰ */
        .tarot-spread { display: flex; gap: 8px; margin-bottom: 30px; justify-content: center; }
        .t-card-wrap { flex: 1; perspective: 1000px; display: flex; flex-direction: column; align-items: center;}
        .t-label { font-size: 11px; color: var(--text-sub); margin-bottom: 8px; letter-spacing: 1px; font-weight: bold;}
        .t-card-inner { width: 100%; max-width: 130px; aspect-ratio: 2/3; position: relative; transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275); transform-style: preserve-3d; }
        .t-card-inner.flipped { transform: rotateY(180deg); }
        .t-face { position: absolute; width: 100%; height: 100%; backface-visibility: hidden; border-radius: 8px; border: 1px solid rgba(155,89,182,0.4); box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .t-back { background: radial-gradient(circle at center, #2a1545, #110522); border: 2px solid var(--accent-tarot); display: flex; align-items: center; justify-content: center; font-size: 30px; color: var(--accent-tarot); }
        .t-front { transform: rotateY(180deg); background: linear-gradient(135deg, rgba(20,10,35,0.9), rgba(0,0,0,0.9)); display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 10px; text-align: center;}
        .t-front-num { font-family: 'Cinzel', serif; font-size: 22px; color: var(--gold); margin-bottom: 5px; }
        .t-front-name { font-size: 13px; font-weight: bold; color: #fff; margin-bottom: 8px; line-height: 1.3;}
        .t-front-pos { font-size: 10px; padding: 2px 8px; border-radius: 10px; font-weight: bold; letter-spacing: 1px;}
        .t-pos-up { background: rgba(212,175,55,0.2); color: var(--gold-light); border: 1px solid var(--gold); }
        .t-pos-rev { background: rgba(201,91,122,0.2); color: #ffb3c6; border: 1px solid var(--accent-love); box-shadow: 0 0 10px rgba(201,91,122,0.4);}

        .btn-retry { width: 100%; padding: 18px; background: rgba(0,0,0,0.3); border: 1px solid rgba(212,175,55,0.4); color: var(--gold); border-radius: 6px; cursor: pointer; font-size: 14px; transition: 0.4s; margin-top: 10px; letter-spacing: 3px; text-transform: uppercase; font-weight: 600; }
        .btn-retry:hover { background: rgba(212,175,55,0.15); color: #fff; box-shadow: 0 0 20px rgba(212,175,55,0.2); }
        .love-theme .btn-retry { border-color: rgba(201,91,122,0.5); color: var(--accent-love); } .love-theme .btn-retry:hover { background: rgba(201,91,122,0.15); }
        .palm-theme .btn-retry { border-color: rgba(32,178,170,0.5); color: var(--accent-palm); } .palm-theme .btn-retry:hover { background: rgba(32,178,170,0.15); }
        .tarot-theme .btn-retry { border-color: rgba(155,89,182,0.5); color: var(--accent-tarot); } .tarot-theme .btn-retry:hover { background: rgba(155,89,182,0.15); }
        
        .btn-home { background: transparent; border: none; color: var(--text-sub); margin-top: 25px; cursor: pointer; font-size: 12px; text-decoration: underline; transition: 0.3s; letter-spacing: 1px; display: block; margin-left: auto; margin-right: auto;}
        .btn-home:hover { color: #fff; }
    </style>
</head>
<body>

<div class="stars-bg"></div>

<div id="page-home" class="page-wrapper active">
    
    <div class="hero-section">
        <div class="hero-title-en">ASTRAL SANCTUARY</div>
        <div class="hero-title-ja">æ˜Ÿå±‘ã®ç¥è¨— - ç·åˆå ã„ã‚µãƒ­ãƒ³ -</div>
        <div class="hero-desc">
            é‹å‘½ã¯æ±ºã¾ã£ã¦ã„ã‚‹ã‚‚ã®ã§ã¯ãªãã€è‡ªã‚‰é¸ã³å–ã‚‹ã‚‚ã®ã€‚<br>
            å½“ã‚µãƒ­ãƒ³ã§ã¯ã€å³ã—ã„ä¿®è¡Œã‚’ç©ã‚“ã 4åã®ç‰¹åˆ¥é‘‘å®šå£«ãŒã€<br>
            ã‚ãªãŸã®é­‚ã®è»Œè·¡ã‚’èª­ã¿è§£ãã€çœŸå®Ÿã®æ„›ã¨æœªæ¥ã¸ã®é“æ¨™ã‚’æç¤ºã—ã¾ã™ã€‚
        </div>
    </div>

    <div class="top-advisors-section">
        <div class="sect-title">OUR ASTROLOGERS<span>- æ‰€å±ç‰¹åˆ¥é‘‘å®šå£« -</span></div>
        <div class="adv-grid">
            <div class="adv-card ac-1">
                <div class="adv-img-wrap"><img src="image.png" class="adv-img" onerror="this.src='https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=150&fit=crop'"></div>
                <div class="adv-card-role">Astrology</div>
                <div class="adv-card-name">æ˜Ÿå° ãƒ«ãƒŸãƒŠ</div>
            </div>
            <div class="adv-card ac-2">
                <div class="adv-img-wrap"><img src="image2.png" class="adv-img" onerror="this.src='https://images.unsplash.com/photo-1517841905240-472988babdf9?w=150&fit=crop'"></div>
                <div class="adv-card-role">Twin Ray</div>
                <div class="adv-card-name">å¤©éœ§ çµç¥ˆ</div>
            </div>
            <div class="adv-card ac-3">
                <div class="adv-img-wrap"><img src="image3.png" class="adv-img" onerror="this.src='https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=150&fit=crop'"></div>
                <div class="adv-card-role">AI Palmistry</div>
                <div class="adv-card-name">ç¥å®®å¯º å¸</div>
            </div>
            <div class="adv-card ac-4">
                <div class="adv-img-wrap"><img src="image4.png" class="adv-img" onerror="this.src='https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=150&fit=crop'"></div>
                <div class="adv-card-role">Tarot Reader</div>
                <div class="adv-card-name">ç¥ä»£ ã‚¢ãƒªã‚¹</div>
            </div>
        </div>
    </div>

    <div class="enter-btn-wrap">
        <button class="enter-btn" onclick="enterSanctuary()">å ã£ã¦ã¿ã‚‹ï¼</button>
    </div>

</div>

<div id="page-app" class="page-wrapper">

    <div class="tab-container" id="tab-menu">
        <button class="tab-btn active t-daily" onclick="switchTab('daily')">DAILY<br><span>ä»Šæ—¥ã®é‹å‹¢</span></button>
        <button class="tab-btn t-destiny" onclick="switchTab('destiny')">TWIN RAY<br><span>é‹å‘½ã®ç›¸æ‰‹</span></button>
        <button class="tab-btn t-palm" onclick="switchTab('palm')">PALM<br><span>ç”»åƒæ‰‹ç›¸é‘‘å®š</span></button>
        <button class="tab-btn t-tarot" onclick="switchTab('tarot')">TAROT<br><span>æœ¬æ ¼ã‚¿ãƒ­ãƒƒãƒˆ</span></button>
    </div>

    <div class="glass-panel">
        
        <div class="advisor-profile" id="profile-area">
            <div class="advisor-photo-wrapper" id="advPhotoWrap">
                <img id="advPhoto" src="image.png" alt="å ã„å¸«" class="advisor-photo">
            </div>
            <div class="advisor-info">
                <div class="advisor-role" id="advRole">Astrology & Tarot</div>
                <div class="advisor-name" id="advName">æ˜Ÿå° ãƒ«ãƒŸãƒŠ (Lumina)</div>
                <div class="advisor-bio" id="advBio">
                    ä»£ã€…ç¶šãæ˜Ÿèª­ã¿ã®å®¶ç³»ã«ç”Ÿã¾ã‚Œã€è¥¿æ´‹å æ˜Ÿè¡“ã¨ã‚¿ãƒ­ãƒƒãƒˆã‚’çµ±åˆã€‚ã‚ãªãŸã®é­‚ã«åˆ»ã¾ã‚ŒãŸéå»ãƒ»ç¾åœ¨ãƒ»æœªæ¥ã®è¨˜éŒ²ã‚’èª­ã¿è§£ãã€é‹å‘½ã‚’å¥½è»¢ã•ã›ã‚‹å…·ä½“çš„ãªé“æ¨™ã‚’æç¤ºã—ã¾ã™ã€‚
                </div>
            </div>
        </div>

        <div id="form-daily" class="content-area active">
            <div class="site-title">ASTRAL ORACLE</div><h1 class="site-title-ja">æ˜Ÿå±‘ã®ç¥è¨—</h1>
            <p class="site-subtitle">ã€œ æ˜Ÿã®é…ç½®ã¨ãƒ¯ãƒ³ã‚ªãƒ©ã‚¯ãƒ«ãŒå‘Šã’ã‚‹ä»Šæ—¥ã®é‹å‘½ ã€œ</p>
            <div class="form-group"><label>ãŠåå‰ (NAME)</label><input type="text" id="name1" placeholder="ä¾‹ï¼šæ˜Ÿé‡ çµè¡£" autocomplete="off"></div>
            <div class="form-group"><label>ç”Ÿå¹´æœˆæ—¥ (BIRTH DATE)</label><input type="date" id="dob1"></div>
            <button class="main-btn" onclick="startDailyOracle()">é‹å‘½ã®ã‚«ãƒ¼ãƒ‰ã‚’å¼•ã</button>
        </div>

        <div id="form-destiny" class="content-area">
            <div class="site-title" style="color:var(--accent-love);">TRUE DESTINY</div><h1 class="site-title-ja">é‹å‘½ã®ç›¸æ‰‹ãƒ»æ·±å±¤éœŠè¦–</h1>
            <p class="site-subtitle">ã€œ é­‚ãƒ¬ãƒ™ãƒ«ã§æƒ¹ã‹ã‚Œåˆã†ã€ŒçœŸå®Ÿã®ä¼´ä¾¶ã€ã‚’ç‰¹å®š ã€œ</p>
            <div class="form-group"><label>ãŠåå‰ (NAME)</label><input type="text" id="name2" placeholder="ä¾‹ï¼šæœˆåŸ è“®" autocomplete="off"></div>
            <div class="input-row">
                <div class="form-group"><label>æ€§åˆ¥</label><select id="gender2"><option value="female">å¥³æ€§</option><option value="male">ç”·æ€§</option><option value="other">ãã®ä»–</option></select></div>
                <div class="form-group"><label>è¡€æ¶²å‹</label><select id="blood2"><option value="A">Aå‹</option><option value="B">Bå‹</option><option value="O">Oå‹</option><option value="AB">ABå‹</option><option value="unknown">ä¸æ˜</option></select></div>
            </div>
            <div class="form-group"><label>ç”Ÿå¹´æœˆæ—¥</label><input type="date" id="dob2"></div>
            <div class="form-group">
                <label>ç¾åœ¨ã®ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼çŠ¶æ³ â€»é‘‘å®šçµæœãŒå¤§ããåˆ†å²ã™ã‚‹é‡è¦é …ç›®ã§ã™</label>
                <select id="status2" style="border-color: rgba(201,91,122,0.4);">
                    <option value="single">ç¾åœ¨ãƒ•ãƒªãƒ¼ï¼ˆé‹å‘½ã®å‡ºä¼šã„ã‚’æ±‚ã‚ã¦ã„ã‚‹ï¼‰</option>
                    <option value="partner">ç¾åœ¨ã€æ‹äººã‚„é…å¶è€…ï¼ˆæ—¦é‚£ãƒ»å¦»ï¼‰ãŒã„ã‚‹</option>
                    <option value="complicated">è¤‡é›‘ãªé–¢ä¿‚ï¼ˆç‰‡æ€ã„ãƒ»ä¸å€«ãƒ»èª°ã«ã‚‚è¨€ãˆãªã„é–¢ä¿‚ãªã©ï¼‰</option>
                </select>
            </div>
            <button class="main-btn love-btn" onclick="startDestinyOracle()">é­‚ã®æ·±å±¤ã«æ¥ç¶šã™ã‚‹</button>
        </div>

        <div id="form-palm" class="content-area">
            <div class="site-title" style="color:var(--accent-palm);">AI PALM SCANNER</div><h1 class="site-title-ja">äººå·¥çŸ¥èƒ½ãƒ»ç”»åƒæ‰‹ç›¸è§£æ</h1>
            <p class="site-subtitle">ã€œ ã‚¹ãƒãƒ›ã®ã‚«ãƒ¡ãƒ©ã§æ’®å½±ã—ãŸç”»åƒã‚’AIãŒç›´æ¥ãƒ”ã‚¯ã‚»ãƒ«è§£æ ã€œ</p>
            <div class="form-group"><label>ãŠåå‰ (NAME)</label><input type="text" id="name3" placeholder="ä¾‹ï¼šå¤©æµ· ç¿”" autocomplete="off"></div>
            <div class="form-group">
                <label>æ‰‹ã®ã²ã‚‰ã®å†™çœŸã‚’æ’®å½±ï¼ˆã¾ãŸã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠï¼‰</label>
                <div class="upload-box" id="uploadBox">
                    <input type="file" id="palmImage" accept="image/*" capture="environment" onchange="previewPalmImage(event)">
                    <div style="font-size:30px; margin-bottom:5px;">ğŸ“·</div>
                    <div class="upload-text">ã‚¿ãƒƒãƒ—ã—ã¦ã‚«ãƒ¡ãƒ©ã‚’èµ·å‹• / å†™çœŸã‚’é¸æŠ</div>
                    <div style="font-size:11px; color:var(--text-sub);">â€»ã‚·ã‚¹ãƒ†ãƒ ãŒç”»åƒã®ã€Œè‚Œè‰²æˆåˆ†ã€ã¨ã€Œã‚·ãƒ¯ã®æ·±ã•ã€ã‚’ãƒ”ã‚¯ã‚»ãƒ«å˜ä½ã§è§£æã—ã¾ã™ã€‚<br>â€»çœŸã£é»’ãªç”»åƒã‚„é¢¨æ™¯å†™çœŸãªã©ã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚</div>
                </div>
                <div class="preview-container" id="previewContainer">
                    <img id="palmPreview" class="preview-img" src="" alt="æ‰‹ç›¸ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼" crossorigin="anonymous">
                    <div class="preview-actions"><button type="button" class="btn-change-img" onclick="resetPalmImage()">æ’®ã‚Šç›´ã™ / ç”»åƒã‚’å¤‰æ›´ã™ã‚‹</button></div>
                </div>
            </div>
            <button class="main-btn palm-btn" onclick="startPalmOracle()">AIæ‰‹ç›¸è§£æã‚’å®Ÿè¡Œã™ã‚‹</button>
        </div>

        <div id="form-tarot" class="content-area">
            <div class="site-title" style="color:var(--accent-tarot);">DEEP TAROT SPREAD</div><h1 class="site-title-ja">æ·±å±¤ã‚¿ãƒ­ãƒƒãƒˆãƒ»ã‚¹ãƒªãƒ¼ã‚«ãƒ¼ãƒ‰</h1>
            <p class="site-subtitle">ã€œ å¤§ã‚¢ãƒ«ã‚«ãƒŠãŒè§£ãæ˜ã‹ã™ã€éå»ã®å› æœã¨æœªæ¥ã®å•“ç¤º ã€œ</p>
            <div class="form-group"><label>ãŠåå‰ (NAME)</label><input type="text" id="name4" placeholder="ä¾‹ï¼šç´«éŸ³ ç²" autocomplete="off"></div>
            <div class="form-group"><label>ç”Ÿå¹´æœˆæ—¥ (BIRTH DATE)</label><input type="date" id="dob4"></div>
            
            <div class="form-group">
                <label>ç¾åœ¨ã‚ãªãŸãŒæŠ±ãˆã¦ã„ã‚‹å…·ä½“çš„ãªæ‚©ã¿ï¼ˆè‡ªç”±å…¥åŠ›ï¼‰</label>
                <textarea id="worry4" placeholder="ä¾‹ï¼šå½¼ã‹ã‚‰é€£çµ¡ãŒæ¥ãªãã¦ä¸å®‰ã€‚ä»Šã®ä»•äº‹ã‚’è¾ã‚ã‚‹ã¹ãã‹è¿·ã£ã¦ã„ã‚‹ã€‚äººé–“é–¢ä¿‚ãŒè¾›ã„..." style="border-color: rgba(155,89,182,0.6);"></textarea>
                <div style="font-size:11px; color:var(--text-sub); margin-top:5px;">â€»å…¥åŠ›ã•ã‚ŒãŸæ‚©ã¿ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’AIãŒè§£æã—ã€å¼•ã‹ã‚ŒãŸã‚«ãƒ¼ãƒ‰ã¨ç´ä»˜ã‘ã¦ã€ã‚ãªãŸã ã‘ã®å€‹åˆ¥ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ç”Ÿæˆã—ã¾ã™ã€‚</div>
            </div>
            
            <button class="main-btn tarot-btn" onclick="startTarotOracle()">ç²¾ç¥ã‚’é›†ä¸­ã—ã€ã‚«ãƒ¼ãƒ‰ã‚’å±•é–‹ã™ã‚‹</button>
        </div>

        <div id="loading">
            <div class="mystic-wheel" id="mWheel"></div>
            <div class="scan-container" id="scanBox">
                <img src="" class="scan-target-img" id="scanTargetImg">
                <div class="scan-grid"></div>
                <div class="scanner-line" id="scannerLine"></div>
            </div>
            <div class="loading-text" id="loadingText">ACCESSING AKASHIC RECORDS...</div>
        </div>

        <div id="res-daily" class="content-area">
            <div class="result-header">
                <div class="result-name" id="resName1"></div><div class="result-meta" id="resDate1"></div>
            </div>
            <div class="story-card">
                <img src="https://images.unsplash.com/photo-1633423712532-601e3b6d415e?q=80&w=800&auto=format&fit=crop" class="story-img" alt="Tarot">
                <div class="story-content"><div class="story-title" id="tarotCardName_daily"></div><div class="story-text" id="msgDailyTotal"></div></div>
            </div>
            <button class="btn-retry" onclick="resetApp()">åˆ¥ã®å ã„ã‚’è©¦ã™</button>
        </div>

        <div id="res-destiny" class="content-area love-theme">
            <div class="result-header">
                <div class="result-name" id="resName2"></div><div class="result-meta">TWIN RAY READING RESULT</div>
            </div>
            <div class="story-card"><img src="https://images.unsplash.com/photo-1518599904199-0ca897819ddb?q=80&w=800&auto=format&fit=crop" class="story-img" alt="Soul"><div class="story-content"><div class="story-title">ç¬¬1ç« ï¼šç¾åœ¨ã®çŠ¶æ³ã¨é­‚ã®çœŸå®Ÿ</div><div class="story-text" id="resD_status"></div></div></div>
            <div class="story-card"><img src="https://images.unsplash.com/photo-1462206092226-f46025ffe607?q=80&w=800&auto=format&fit=crop" class="story-img" alt="Past Life"><div class="story-content"><div class="story-title">ç¬¬2ç« ï¼šå‰ä¸–ã‹ã‚‰ã®å› ç¸</div><div class="story-text" id="resD_past"></div></div></div>
            <div class="story-card"><img src="https://images.unsplash.com/photo-1532012197267-da84d127e765?q=80&w=800&auto=format&fit=crop" class="story-img" alt="Appearance"><div class="story-content"><div class="story-title">ç¬¬3ç« ï¼šç›¸æ‰‹ã®ã€Œå®¹å§¿ã€ã¨ã€Œè£ã®é¡”ã€</div><div class="story-text" id="resD_char"></div></div></div>
            <div class="story-card"><img src="https://images.unsplash.com/photo-1501139083538-0139583c060f?q=80&w=800&auto=format&fit=crop" class="story-img" alt="Timing"><div class="story-content"><div class="story-title">ç¬¬4ç« ï¼šäº¤å·®ã™ã‚‹ã€Œæ™‚æœŸã€ã¨å‰å…†</div><div class="story-text" id="resD_timing"></div></div></div>
            <button class="btn-retry" style="border-color:var(--accent-love); color:var(--accent-love);" onclick="resetApp()">CLOSE AKASHIC RECORDS</button>
        </div>

        <div id="res-palm" class="content-area palm-theme">
            <div class="result-header">
                <div class="result-name" id="resName3"></div><div class="result-meta">AI PALMISTRY ANALYSIS RESULT</div>
            </div>
            <div class="story-card" style="text-align:center; padding-top:25px;">
                <img id="resPalmImg" src="" alt="ã‚ãªãŸã®æ‰‹ç›¸" style="width:140px; height:140px; object-fit:cover; border-radius:50%; border:3px solid var(--accent-palm); box-shadow:0 0 20px rgba(32,178,170,0.4);">
                <div style="font-size:12px; color:var(--text-sub); margin-top:12px; letter-spacing: 1px;">ç”»åƒãƒ”ã‚¯ã‚»ãƒ« ã‚¹ã‚­ãƒ£ãƒ³å®Œäº†</div>
            </div>
            <div class="story-card"><div class="story-content"><div class="story-title">ã€ç”»åƒè§£æã€‘æ‰‹ç›¸ã®å…¨ä½“åƒ</div><div class="story-text" id="resP_overall"></div></div></div>
            <div class="story-card"><div class="story-content"><div class="story-title">åŸºæœ¬ï¼”ç·šã®åˆ†æ</div><div class="story-text"><p id="resP_life"></p><p id="resP_head"></p><p id="resP_heart"></p><p id="resP_fate"></p></div></div></div>
            <div class="story-card"><div class="story-content"><div class="story-title">ä»Šå¾Œã®æœªæ¥ï¼ˆé‹å‘½ã®è»¢æ©Ÿã¨è»Œè·¡ï¼‰</div><div class="story-text" id="resP_future"></div></div></div>
            <div class="story-card"><div class="story-content"><div class="story-title">ä»Šå¾Œã®æ‹æ„›ãƒ»ä»•äº‹é‹</div><div class="story-text"><p id="resP_love"></p><p id="resP_work"></p></div></div></div>
            <button class="btn-retry" style="border-color:var(--accent-palm); color:var(--accent-palm);" onclick="resetApp()">FINISH ANALYSIS</button>
        </div>

        <div id="res-tarot" class="content-area tarot-theme">
            <div class="result-header">
                <div class="result-name" id="resName4"></div><div class="result-meta">THREE CARD SPREAD RESULT</div>
            </div>
            
            <div class="tarot-spread">
                <div class="t-card-wrap">
                    <div class="t-label">PAST (éå»)</div>
                    <div class="t-card-inner" id="tCard1">
                        <div class="t-face t-back">âœ¦</div>
                        <div class="t-face t-front">
                            <div class="t-front-num" id="tcNum1"></div><div class="t-front-name" id="tcName1"></div><div class="t-front-pos" id="tcPos1"></div>
                        </div>
                    </div>
                </div>
                <div class="t-card-wrap">
                    <div class="t-label">PRESENT (ç¾åœ¨)</div>
                    <div class="t-card-inner" id="tCard2">
                        <div class="t-face t-back">âœ¦</div>
                        <div class="t-face t-front">
                            <div class="t-front-num" id="tcNum2"></div><div class="t-front-name" id="tcName2"></div><div class="t-front-pos" id="tcPos2"></div>
                        </div>
                    </div>
                </div>
                <div class="t-card-wrap">
                    <div class="t-label">FUTURE (æœªæ¥)</div>
                    <div class="t-card-inner" id="tCard3">
                        <div class="t-face t-back">âœ¦</div>
                        <div class="t-face t-front">
                            <div class="t-front-num" id="tcNum3"></div><div class="t-front-name" id="tcName3"></div><div class="t-front-pos" id="tcPos3"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="story-card"><div class="story-content"><div class="story-title">ç¬¬1ã®å•“ç¤ºï¼šæ‚©ã¿ã®ã€Œæ ¹æœ¬åŸå› ï¼ˆéå»ï¼‰ã€</div><div class="story-text" id="resT_past"></div></div></div>
            <div class="story-card"><div class="story-content"><div class="story-title">ç¬¬2ã®å•“ç¤ºï¼šå–ã‚Šå·»ãã€Œç¾çŠ¶ï¼ˆç¾åœ¨ï¼‰ã€</div><div class="story-text" id="resT_present"></div></div></div>
            <div class="story-card"><div class="story-content"><div class="story-title">ç¬¬3ã®å•“ç¤ºï¼šã‚„ãŒã¦è¨ªã‚Œã‚‹ã€Œçµæœ«ï¼ˆæœªæ¥ï¼‰ã€</div><div class="story-text" id="resT_future"></div></div></div>
            
            <div class="story-card" style="border-color:var(--gold);">
                <div class="story-content">
                    <div class="story-title" style="color:var(--gold); border-color:var(--gold);">ç¥ä»£ã‚¢ãƒªã‚¹ã‹ã‚‰ã®å€‹åˆ¥é‘‘å®šã‚¢ãƒ³ã‚µãƒ¼</div>
                    <div class="story-text" id="tarotFinalMsg" style="color:var(--gold-light);"></div>
                </div>
            </div>

            <button class="btn-retry" style="border-color:var(--accent-tarot); color:var(--accent-tarot);" onclick="resetApp()">CLOSE TAROT SPREAD</button>
        </div>

        <button class="btn-home" onclick="backToHome()">â—€ ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆã‚µãƒ­ãƒ³å…¥å£ï¼‰ã«æˆ»ã‚‹</button>

    </div>
</div>

<script>
    // --- ğŸ”® ãƒšãƒ¼ã‚¸åˆ‡ã‚Šæ›¿ãˆåˆ¶å¾¡ ---
    function enterSanctuary() {
        document.getElementById('page-home').classList.remove('active');
        document.getElementById('page-app').classList.add('active');
        switchTab('daily');
        window.scrollTo(0, 0);
    }
    function backToHome() {
        resetApp(); 
        document.getElementById('page-app').classList.remove('active');
        document.getElementById('page-home').classList.add('active');
        window.scrollTo(0, 0);
    }

    // --- ğŸ”® å ã„å¸«ãƒ‡ãƒ¼ã‚¿ ---
    const advisors = {
        daily: { photo: "image.png", role: "Astrology & Tarot", name: "æ˜Ÿå° ãƒ«ãƒŸãƒŠ", bio: "ä»£ã€…ç¶šãæ˜Ÿèª­ã¿ã®å®¶ç³»ã«ç”Ÿã¾ã‚Œã€è¥¿æ´‹å æ˜Ÿè¡“ã¨ã‚¿ãƒ­ãƒƒãƒˆã‚’çµ±åˆã€‚ã‚ãªãŸã®é­‚ã«åˆ»ã¾ã‚ŒãŸéå»ãƒ»ç¾åœ¨ãƒ»æœªæ¥ã®è¨˜éŒ²ã‚’èª­ã¿è§£ãã€é‹å‘½ã‚’å¥½è»¢ã•ã›ã‚‹å…·ä½“çš„ãªé“æ¨™ã‚’æç¤ºã—ã¾ã™ã€‚" },
        destiny: { photo: "image2.png", role: "Twin Ray Reader", name: "å¤©éœ§ çµç¥ˆ", bio: "å¹¼å°‘æœŸã‚ˆã‚Šä»–è€…ã®ã€Œã”ç¸ã®ç³¸ã€ãŒè¦–ãˆã‚‹ç‰¹ç•°ä½“è³ªã‚’æŒã¤ã€‚ç¾åœ¨ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãŒã„ã‚‹æ–¹ã§ã‚‚ã€é­‚ãƒ¬ãƒ™ãƒ«ã§ã®ã€æœ¬å½“ã®é‹å‘½ã®ç›¸æ‰‹ï¼ˆãƒ„ã‚¤ãƒ³ãƒ¬ã‚¤ï¼‰ã€ã‚’æ­£ç¢ºã«ç‰¹å®šã—ã€å½ã‚Šã®ãªã„çœŸå®Ÿã‚’ãŠä¼ãˆã—ã¾ã™ã€‚" },
        palm: { photo: "image3.png", role: "AI Palm Scanner", name: "ç¥å®®å¯º å¸", bio: "ç”»åƒè§£æãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¨æ‰‹ç›¸å­¦ã‚’å®Œå…¨ã«çµ±åˆã—ãŸã‚·ã‚¹ãƒ†ãƒ ã€‚ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸç”»åƒã®ãƒ”ã‚¯ã‚»ãƒ«é…åˆ—ï¼ˆè‰²ã¨ã‚¨ãƒƒã‚¸ï¼‰ã‚’ç›´æ¥ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§è§£æã—ã€ç²¾ç·»ãªã‚¹ã‚­ãƒ£ãƒ³ã«ã‚ˆã‚‹åˆ¤å®šã‚’è¡Œã„ã¾ã™ã€‚" },
        tarot: { photo: "image4.png", role: "Spiritual Tarot", name: "ç¥ä»£ ã‚¢ãƒªã‚¹", bio: "å¤§ã‚¢ãƒ«ã‚«ãƒŠå…¨22æšã®æ³¢å‹•ã‚’æ“ã‚Šã€æ½œåœ¨æ„è­˜ã®æœ€æ·±éƒ¨ã‚’è¦–é€ã‹ã™éœŠæ„Ÿã‚¿ãƒ­ãƒƒãƒˆãƒªãƒ¼ãƒ€ãƒ¼ã€‚ã‚ãªãŸãŒå…¥åŠ›ã—ãŸæ‚©ã¿ã®æ–‡å­—æ³¢å‹•ã‚’èª­ã¿å–ã‚Šã€è§£æ±ºã¸ã¨å°ãã‚ãªãŸã ã‘ã®å€‹åˆ¥ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’ç´¡ãå‡ºã—ã¾ã™ã€‚" }
    };

    function switchTab(type) {
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        document.querySelectorAll('.content-area').forEach(div => div.classList.remove('active'));
        document.querySelector(`.tab-btn.t-${type}`).classList.add('active');
        document.getElementById('form-' + type).classList.add('active');

        const photoEl = document.getElementById('advPhoto');
        photoEl.style.opacity = 0;
        setTimeout(() => {
            photoEl.onerror = () => { photoEl.src = 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=200&fit=crop'; };
            photoEl.src = advisors[type].photo;
            document.getElementById('advRole').innerText = advisors[type].role;
            document.getElementById('advName').innerText = advisors[type].name;
            document.getElementById('advBio').innerText = advisors[type].bio;
            
            const pWrap = document.getElementById('advPhotoWrap');
            let color = 'var(--gold)'; let shadow = 'rgba(212,175,55,0.3)';
            if(type === 'destiny') { color = 'var(--accent-love)'; shadow = 'rgba(201,91,122,0.3)'; }
            else if(type === 'palm') { color = 'var(--accent-palm)'; shadow = 'rgba(32,178,170,0.3)'; }
            else if(type === 'tarot') { color = 'var(--accent-tarot)'; shadow = 'rgba(155,89,182,0.3)'; }
            
            document.getElementById('advRole').style.color = color;
            pWrap.style.background = `linear-gradient(135deg, ${color}, #222)`;
            pWrap.style.boxShadow = `0 0 30px ${shadow}`;
            photoEl.style.opacity = 1;
        }, 300);
    }

    function getSeededRandom(seedStr) {
        let seed = 0; for (let i = 0; i < seedStr.length; i++) seed = seedStr.charCodeAt(i) + ((seed << 5) - seed);
        seed = Math.abs(seed); return function() { let x = Math.sin(seed++) * 10000; return x - Math.floor(x); }
    }

    function showLoading(text, color, isPalm, callback) {
        document.getElementById("tab-menu").style.display = "none"; document.getElementById("profile-area").style.display = "none"; document.querySelectorAll(".content-area").forEach(el => el.classList.remove("active"));
        document.getElementById("loadingText").innerText = text; document.getElementById("loadingText").style.color = color;
        
        if (isPalm) { document.getElementById("mWheel").style.display = "none"; document.getElementById("scanBox").style.display = "block"; document.getElementById("scannerLine").style.display = "block"; } 
        else { document.getElementById("scanBox").style.display = "none"; const mWheel = document.getElementById("mWheel"); mWheel.style.display = "block"; mWheel.style.borderColor = `rgba(255,255,255,0.2)`; mWheel.style.borderTopColor = color; mWheel.style.borderBottomColor = color; }
        
        document.getElementById("loading").style.display = "block"; window.scrollTo({ top: 0, behavior: "smooth" });
        setTimeout(() => { document.getElementById("loading").style.display = "none"; if(isPalm) document.getElementById("scannerLine").style.display = "none"; callback(); }, isPalm ? 4000 : 3000); 
    }

    function resetApp() {
        document.querySelectorAll(".content-area").forEach(el => el.classList.remove("active"));
        document.getElementById("tab-menu").style.display = "flex"; document.getElementById("profile-area").style.display = "flex";
        const activeTab = document.querySelector('.tab-btn.active').classList.contains('t-daily') ? 'form-daily' : document.querySelector('.tab-btn.active').classList.contains('t-destiny') ? 'form-destiny' : document.querySelector('.tab-btn.active').classList.contains('t-palm') ? 'form-palm' : 'form-tarot';
        document.getElementById(activeTab).classList.add("active");
        document.querySelectorAll('.t-card-inner').forEach(card => card.classList.remove('flipped'));
        window.scrollTo({ top: 0, behavior: "smooth" });
    }

    // ==========================================
    // ğŸ”® 1. æ—¥ã€…ã®é‹å‹¢ 
    // ==========================================
    const dailyTarots = [{ name: "æ„šè€…", m: "æœªçŸ¥ã¸ã®æŒ‘æˆ¦ã€‚" },{ name: "é­”è¡“å¸«", m: "å‰µé€ åŠ›ã€æ–°ã—ã„å§‹ã¾ã‚Šã€‚" },{ name: "å¥³å¸", m: "è±Šã‹ã•ã¨æ„›æƒ…ã®æˆå°±ã€‚" },{ name: "é‹å‘½ã®è¼ª", m: "å¥½è»¢ã€ãƒãƒ£ãƒ³ã‚¹åˆ°æ¥ã€‚" },{ name: "æ˜Ÿ", m: "å¸Œæœ›ã¨æ·±ã„ç™’ã‚„ã—ã€‚" }];
    function startDailyOracle() {
        const name = document.getElementById("name1").value.trim(); const dob = document.getElementById("dob1").value;
        if (!name || !dob) return alert("ãŠåå‰ã¨ç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
        showLoading("READING ASTROLOGICAL ALIGNMENTS...", "var(--gold)", false, () => {
            const random = getSeededRandom(name + dob + new Date().getDate()); 
            const tarot = dailyTarots[Math.floor(random() * dailyTarots.length)]; const position = random() > 0.7 ? "ï¼ˆé€†ä½ç½®ï¼‰" : "ï¼ˆæ­£ä½ç½®ï¼‰";
            document.getElementById("resName1").innerText = name + " æ§˜"; document.getElementById("resDate1").innerText = `TODAY'S ORACLE`;
            document.getElementById("tarotCardName_daily").innerText = "å°ãã®ã‚«ãƒ¼ãƒ‰ï¼š " + tarot.name + " " + position;
            document.getElementById("msgDailyTotal").innerHTML = `<p>æœ¬æ—¥ã®å¤©ç©ºå›³ã‚’èª­ã¿è§£ãã¨ã€æœˆãŒå¹¸é‹ã®æ˜Ÿã¨é‡ãªã‚Šå¼·åŠ›ãªã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’æ”¾ã£ã¦ã„ã¾ã™ã€‚</p><p>å¼•ã‹ã‚ŒãŸã‚«ãƒ¼ãƒ‰ã¯ã€${tarot.name}ã€${position}ã€‚${tarot.m} ä»Šæ—¥ã¯ç›´æ„Ÿã®èµ´ãã¾ã¾ã«è¡Œå‹•ã—ã€å®‡å®™ã‹ã‚‰ã®ã‚µã‚¤ãƒ³ã‚’å—ã‘å–ã£ã¦ãã ã•ã„ã€‚</p>`;
            document.getElementById("res-daily").classList.add("active");
        });
    }

    // ==========================================
    // ğŸ”® 2. é‹å‘½ã®ç›¸æ‰‹ 
    // ==========================================
    function startDestinyOracle() {
        const name = document.getElementById("name2").value.trim(); const dob = document.getElementById("dob2").value; const status = document.getElementById("status2").value;
        if (!name || !dob) return alert("æ·±å±¤éœŠè¦–ã‚’è¡Œã†ãŸã‚ã€ãŠåå‰ã¨ç”Ÿå¹´æœˆæ—¥ã¯å¿…é ˆã§ã™ã€‚");
        showLoading("ACCESSING SOUL CONTRACTS...", "var(--accent-love)", false, () => {
            const random = getSeededRandom(name + dob + status + "v_premium_final"); 
            document.getElementById("resName2").innerText = name + " æ§˜";
            let msgStatus = "";
            if (status === "single") {
                msgStatus = `<p>ç¾åœ¨ãƒ•ãƒªãƒ¼ã®ã‚ãªãŸã€‚ç„¡æ„è­˜ã«å¿ƒã®å£ã‚’ä½œã£ã¦ã„ã‚‹æ³¢å‹•ãŒè¦–ãˆã¾ã™ã€‚ã—ã‹ã—ã€ã‚ãªãŸã®<span class='love-highlight'>é­‚ã®åŠèº«ï¼ˆãƒ„ã‚¤ãƒ³ãƒ¬ã‚¤ï¼‰</span>ã¯ã€ã™ã§ã«ã‚ãªãŸã®ã™ãè¿‘ãã¾ã§æ¥è¿‘ã—ã¦ãã¦ã„ã¾ã™ã€‚</p>`;
            } else if (status === "partner") {
                // ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãŒã„ã‚‹å ´åˆã®3ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†å²ï¼ˆå¿…ãšé‹å‘½ã®ç›¸æ‰‹ã¯åˆ¥ã«ã„ã‚‹ã¨è¨€ã†ï¼‰
                const partnerVariations = [
                    `<p>éœŠè¦–ã®æ³¢é•·ã‚’ä»Šã®ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã«åˆã‚ã›ã¦ã¿ã¾ã—ãŸã€‚ç¾ä¸–ã«ãŠã„ã¦å¤§åˆ‡ãªã€Œå­¦ã³ã€ã‚’ä¸ãˆåˆã†é‡è¦ãªã‚½ã‚¦ãƒ«ãƒ¡ã‚¤ãƒˆã§ã™ã€‚</p><p>ã—ã‹ã—ã€é­‚ã®æœ€æ·±éƒ¨ã¾ã§æ·±ãæ½œã£ã¦ã¿ã‚‹ã¨ã€<span class='love-highlight'>ã‚ãªãŸã®ã€æœ¬å½“ã®é‹å‘½ã®ç›¸æ‰‹ã€ã¯ã€åˆ¥ã«ã‚‚ã†ä¸€äººå­˜åœ¨ã—ã¦ã„ã‚‹</span>ã¨ã„ã†å¼·çƒˆãªæ³¢å‹•ã‚’æ„Ÿã˜ã¾ã™ã€‚ä»Šã®é–¢ä¿‚ã«å­¤ç‹¬ã‚’æ„Ÿã˜ã¦ã„ã‚‹ãªã‚‰ã€ãã‚Œã¯é­‚ãŒæœ¬æ¥ã®åŠèº«ã‚’æ±‚ã‚ã¦ã„ã‚‹ã‚µã‚¤ãƒ³ã§ã™ã€‚</p>`,
                    `<p>ç¾åœ¨ã®ãŠç›¸æ‰‹ã¨ã¯ã€å‰ä¸–ã‹ã‚‰æŒã¡è¶Šã—ãŸã€æ·±ã„ã‚«ãƒ«ãƒã€ã®è§£æ¶ˆã®ãŸã‚ã«çµã°ã‚Œã¦ã„ã¾ã™ã€‚æ„›ã¨åŸ·ç€ãŒå…¥ã‚Šäº¤ã˜ã‚‹é–¢ä¿‚ã«ãªã‚Šã‚„ã™ã„æ™‚æœŸã§ã™ã€‚</p><p>ã“ã®ã‚«ãƒ«ãƒã®æ¸…ç®—ãŒé€²ã‚€ã«ã¤ã‚Œã€ã‚ã‚‹çœŸå®ŸãŒæµ®ãå½«ã‚Šã«ãªã‚Šã¾ã™ã€‚ãã‚Œã¯ã€<span class='love-highlight'>ã‚ãªãŸã®ã€æœ¬å½“ã®é‹å‘½ã®ç›¸æ‰‹ã€ã¯ã€åˆ¥ã«ã‚‚ã†ä¸€äººå­˜åœ¨ã—ã¦ã„ã‚‹</span>ã¨ã„ã†äº‹å®Ÿã§ã™ã€‚ä»Šã®é–¢ä¿‚ã¯ã€ãã®ç©¶æ¥µã®ç›¸æ‰‹ã¨çµã°ã‚Œã‚‹ãŸã‚ã®é­‚ã®æº–å‚™æœŸé–“ã«ä»–ãªã‚Šã¾ã›ã‚“ã€‚</p>`,
                    `<p>ç¾åœ¨ã®é–¢ä¿‚æ€§ã«ãŠã„ã¦ã€ã‚ãªãŸã®é­‚ã¯ä»Šã€éå¸¸ã«å¤§ããªè»¢æ›æœŸã‚’è¿ãˆã¦ã„ã¾ã™ã€‚ä»Šã®ãŠç›¸æ‰‹ã«æ„Ÿè¬ã®å¿µã‚’æŠ±ãã¤ã¤ã‚‚ã€ã©ã“ã‹ã€Œè‡ªåˆ†ãŒæœ¬å½“ã«é‚„ã‚‹ã¹ãå ´æ‰€ã€ã‚’æ¢ã—ã¦ã„ã‚‹ã®ã§ã¯ãªã„ã§ã—ã‚‡ã†ã‹ã€‚</p><p>ã‚¢ã‚«ã‚·ãƒƒã‚¯ãƒ¬ã‚³ãƒ¼ãƒ‰ã®è¨˜è¿°ã¯æ®‹é…·ãªã¾ã§ã«æ˜ç¢ºã§ã™ã€‚<span class='love-highlight'>ã‚ãªãŸã®ã€æœ¬å½“ã®é‹å‘½ã®ç›¸æ‰‹ã€ã¯ã€åˆ¥ã«ã‚‚ã†ä¸€äººå­˜åœ¨ã—ã¦ã„ã‚‹</span>ã®ã§ã™ã€‚é ã‹ã‚‰ãšè¨ªã‚Œã‚‹ãã®å‡ºé€¢ã„ãŒã€ã‚ãªãŸã®äººç”Ÿã‚’å®Œå…¨ã«å®Œæˆã•ã›ã‚‹ã§ã—ã‚‡ã†ã€‚</p>`
                ];
                msgStatus = partnerVariations[Math.floor(random() * partnerVariations.length)];
            } else { 
                msgStatus = `<p>ç¾åœ¨ã€è¤‡é›‘ãªé–¢ä¿‚æ€§ã®ä¸­ã§é­‚ãŒã™ã‚Šæ¸›ã£ã¦ã„ã¾ã™ã€‚<span class='alert-text'>ã‚ãªãŸãŒä»ŠåŸ·ç€ã—ã¦ã„ã‚‹ãã®æ–¹ã¯ã€æœ¬å½“ã®é‹å‘½ã®ç›¸æ‰‹ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</span>åŸ·ç€ã‚’æ‰‹æ”¾ã—ãŸç¬é–“ã«æœ¬ç‰©ã®æ„›ãŒå…¥ã‚Šè¾¼ã‚€ã‚¹ãƒšãƒ¼ã‚¹ãŒç”Ÿã¾ã‚Œã¾ã™ã€‚</p>`;
            }
            document.getElementById("resD_status").innerHTML = msgStatus;
            document.getElementById("resD_past").innerHTML = `<p>äºŒäººã¯éå»ä¸–ã§æ·±ãæ„›ã—åˆã„ãªãŒã‚‰ã‚‚å¼•ãè£‚ã‹ã‚ŒãŸå› ç¸ãŒã‚ã‚Šã¾ã™ã€‚ãã®å¼·çƒˆãªå¿µãŒç£çŸ³ã¨ãªã‚Šã€ç¾ä»£ã§å†ã³å¼•ãåˆã£ã¦ã„ã¾ã™ã€‚</p>`;
            document.getElementById("resD_char").innerHTML = `<p>è¡¨å‘ãã¯çœŸé¢ç›®ã§ã‚¯ãƒ¼ãƒ«ã§ã™ãŒã€æ·±ã„ä»²ã«ãªã‚‹ã¨è±¹å¤‰ã—ã¾ã™ã€‚<span class='love-highlight'>ã‚ãªãŸã«å¯¾ã—ã¦ã ã‘ã¯ã€Œç”˜ãˆã‚“åŠã€ãªä¸€é¢ã‚’è¦‹ã›ã‚‹ã§ã—ã‚‡ã†ã€‚</span></p>`;
            document.getElementById("resD_timing").innerHTML = `<p>äºŒäººã®é­‚ã®è»Œé“ãŒäº¤å·®ã™ã‚‹æ™‚æœŸã¯ã€ã‚ãªãŸãŒã€ä»Šã®åŸ·ç€ã‚’æ‰‹æ”¾ã—ãŸç›´å¾Œã€ã§ã™ã€‚æ•°å­—ã®ã‚¾ãƒ­ç›®ã‚’ã‚ˆãè¦‹ã‚‹ã‚ˆã†ã«ãªã£ãŸã‚‰åˆå›³ã§ã™ã€‚</p>`;
            document.getElementById("res-destiny").classList.add("active");
        });
    }

    // ==========================================
    // âœ‹ 3. AIæ‰‹ç›¸é‘‘å®š (æœ¬ç‰©ã®ãƒ”ã‚¯ã‚»ãƒ«ç”»åƒè§£æ)
    // ==========================================
    let currentImageElement = null; 

    function previewPalmImage(event) {
        const file = event.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = function(e) {
                const src = e.target.result; 
                document.getElementById("palmPreview").src = src; 
                document.getElementById("scanTargetImg").src = src; 
                document.getElementById("resPalmImg").src = src; 
                
                // è§£æç”¨ã®Imageã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆ
                currentImageElement = new Image();
                currentImageElement.src = src;
                
                document.getElementById("uploadBox").style.display = "none"; 
                document.getElementById("previewContainer").style.display = "block";
            }
            reader.readAsDataURL(file);
        }
    }
    
    function resetPalmImage() { 
        document.getElementById("palmImage").value = ""; 
        currentImageElement = null; 
        document.getElementById("previewContainer").style.display = "none"; 
        document.getElementById("uploadBox").style.display = "block"; 
    }

    // Canvas APIã«ã‚ˆã‚‹ç”»åƒè§£æï¼ˆæ‰‹ã‹ã©ã†ã‹ã®åˆ¤å®šï¼‹ç”»åƒã”ã¨ã®ã‚·ãƒ¼ãƒ‰ç”Ÿæˆï¼‰
    function analyzePalmImage(img) {
        return new Promise((resolve) => {
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = 100; canvas.height = 100; // è»½é‡åŒ–ã®ãŸã‚100x100ã§ã‚¹ã‚­ãƒ£ãƒ³
            ctx.drawImage(img, 0, 0, 100, 100);
            
            let imgData;
            try {
                imgData = ctx.getImageData(0, 0, 100, 100);
            } catch(e) {
                // CORSç­‰ã§èª­ã¿å–ã‚Œãªã„å ´åˆã®ãƒ•ã‚§ã‚¤ãƒ«ã‚»ãƒ¼ãƒ•
                resolve({ isHand: true, hash: 9999, edgeRatio: 0.1 });
                return;
            }
            
            const data = imgData.data;
            let skinToneCount = 0;
            let edgeCount = 0;
            let hash = 0;

            for (let i = 0; i < data.length; i += 4) {
                let r = data[i], g = data[i+1], b = data[i+2];
                // RGBå€¤ã‚’è¶³ã—åˆã‚ã›ã¦ç”»åƒç‰¹æœ‰ã®ãƒãƒƒã‚·ãƒ¥ã‚’ä½œæˆï¼ˆç”»åƒãŒ1pxã§ã‚‚é•ãˆã°å€¤ãŒå¤‰ã‚ã‚‹ï¼‰
                hash = (hash * 31 + r + g + b) | 0; 
                
                // ç°¡æ˜“çš„ãªè‚Œè‰²åˆ¤å®šï¼ˆèµ¤ã¿ãŒä¸€ç•ªå¼·ãã€æ¥µç«¯ãªç™½é»’ã§ã¯ãªã„ï¼‰
                if (r > 60 && r > b && r > g - 20 && (Math.max(r,g,b) - Math.min(r,g,b) > 10)) {
                    skinToneCount++;
                }
                
                // ç°¡æ˜“ã‚¨ãƒƒã‚¸åˆ¤å®šï¼ˆã‚·ãƒ¯ã®è¤‡é›‘ã•ï¼‰
                if (i > 4) {
                    let prevR = data[i-4], prevG = data[i-3], prevB = data[i-2];
                    let diff = Math.abs(r - prevR) + Math.abs(g - prevG) + Math.abs(b - prevB);
                    if (diff > 40) edgeCount++;
                }
            }
            
            const skinRatio = skinToneCount / (data.length / 4);
            const edgeRatio = edgeCount / (data.length / 4);
            
            resolve({
                isHand: skinRatio > 0.05, // è‚Œè‰²ã£ã½ã„ãƒ”ã‚¯ã‚»ãƒ«ãŒ5%ä»¥ä¸Šã‚ã‚Œã°ã€Œæ‰‹ã€ã¨ã—ã¦è¨±å¯
                hash: hash,
                edgeRatio: edgeRatio
            });
        });
    }

    async function startPalmOracle() {
        const name = document.getElementById("name3").value.trim();
        if (!name || !currentImageElement) return alert("ãŠåå‰ã¨ã€æ‰‹ã®ã²ã‚‰ã®å†™çœŸã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒå¿…è¦ã§ã™ã€‚");

        // ãƒ”ã‚¯ã‚»ãƒ«è§£æã®å®Ÿè¡Œ
        const analysis = await analyzePalmImage(currentImageElement);
        
        // ã€é‡è¦ã€‘æ‰‹ä»¥å¤–ã®ç”»åƒï¼ˆé¢¨æ™¯ã‚„çœŸã£é»’ãªç”»åƒãªã©ï¼‰ã‚’å¼¾ã
        if (!analysis.isHand) {
            alert("ã€AIã‚¹ã‚­ãƒ£ãƒ³ã‚¨ãƒ©ãƒ¼ã€‘\næ‰‹ã®ã²ã‚‰ãŒæ­£ã—ãæ¤œå‡ºã§ãã¾ã›ã‚“ã§ã—ãŸï¼ˆè‚Œè‰²æˆåˆ†ãŒä¸è¶³ã—ã¦ã„ã¾ã™ï¼‰ã€‚\næ‰‹ä»¥å¤–ã®å†™çœŸã‹ã€æš—ã™ãã‚‹å†™çœŸã®å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚åˆ¥ã®æ˜ã‚‹ã„å†™çœŸã§ãŠè©¦ã—ãã ã•ã„ã€‚");
            return;
        }

        showLoading("DEEP SCANNING PIXEL DATA...", "var(--accent-palm)", true, () => {
            // ç”»åƒã®ãƒ”ã‚¯ã‚»ãƒ«ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ä½œã£ãŸãƒãƒƒã‚·ãƒ¥ã‚’ã‚·ãƒ¼ãƒ‰å€¤ã®å…ƒã«ã™ã‚‹ï¼
            const random = getSeededRandom(name + analysis.hash.toString() + "ai_palm_pixel_v2"); 
            document.getElementById("resName3").innerText = name + " æ§˜";
            
            // ã‚¨ãƒƒã‚¸ï¼ˆã‚·ãƒ¯ï¼‰ã®å¤šã•ã§ãƒ†ã‚­ã‚¹ãƒˆã‚’å‡ºã—åˆ†ã‘ã‚‹
            let overallText = "";
            if (analysis.edgeRatio > 0.12) {
                overallText = "AIã®ç”»åƒè§£æã«ã‚ˆã‚Šã€ã‚ãªãŸã®æ‰‹ç›¸ã¯<span class='palm-highlight'>éå¸¸ã«è¤‡é›‘ãªç·šãŒç„¡æ•°ã«åˆ»ã¾ã‚ŒãŸã€Œæ°´ãƒ»é¢¨ã®è¦ç´ ã€</span>ã‚’å¼·ãå¸¯ã³ã¦ã„ã‚‹ã“ã¨ãŒåˆ¤æ˜ã—ã¾ã—ãŸã€‚éå¸¸ã«æ„Ÿå—æ€§ãŒé«˜ãã€ä»–äººã®ç—›ã¿ãŒã‚ã‹ã‚‹å„ªã—ã„æ€§æ ¼ã§ã™ã€‚";
            } else {
                overallText = "AIã®ç”»åƒè§£æã«ã‚ˆã‚Šã€ã‚ãªãŸã®æ‰‹ç›¸ã¯<span class='palm-highlight'>ä¸»è¦ãªç·šãŒå¤ªãåŠ›å¼·ãåˆ»ã¾ã‚ŒãŸã€Œç«ãƒ»åœ°ã®è¦ç´ ã€</span>ã‚’å¼·ãå¸¯ã³ã¦ã„ã‚‹ã“ã¨ãŒåˆ¤æ˜ã—ã¾ã—ãŸã€‚è¿·ã„ãŒå°‘ãªãã€æ±ºæ–­åŠ›ã¨è¡Œå‹•åŠ›ã«å„ªã‚ŒãŸå¼·é­ãªãƒ¡ãƒ³ã‚¿ãƒ«ã®æŒã¡ä¸»ã§ã™ã€‚";
            }
            document.getElementById("resP_overall").innerHTML = `<p>${overallText}</p>`;
            
            const p_lifes = ["æ‰‹é¦–ã®æ–¹ã¾ã§æ·±ãåˆ»ã¾ã‚Œã¦ãŠã‚Šã€æã‚ã—ã„ã»ã©ã®ç”Ÿå‘½åŠ›ã¨ãƒã‚¤ã‚¿ãƒªãƒ†ã‚£ã‚’ç§˜ã‚ã¦ã„ã¾ã™ã€‚", "é‡‘æ˜Ÿä¸˜ã‚’åºƒãå›²ã‚€ã‚ˆã†ã«ä¼¸ã³ã¦ã„ã¾ã™ã€‚éå¸¸ã«æ„›æƒ…æ·±ãã€äººã‚’å¼•ãä»˜ã‘ã‚‹å¼·ã„é­…åŠ›ï¼ˆã‚«ãƒªã‚¹ãƒæ€§ï¼‰ã‚’æ”¾ã£ã¦ã„ã¾ã™ã€‚"];
            const p_heads = ["çœŸæ¨ªã«ä¸€ç›´ç·šã«ä¼¸ã³ã¦ã„ã¾ã™ã€‚éå¸¸ã«è«–ç†çš„ã§æ„Ÿæƒ…ã«æµã•ã‚Œãšç¢ºå®Ÿãªæˆæœã‚’å‡ºã™æ€è€ƒå›è·¯ã§ã™ã€‚", "æ‰‹é¦–ã®ä¸‹æ–¹ã«å‘ã‹ã£ã¦ç¾ã—ã„ã‚«ãƒ¼ãƒ–ã‚’æã„ã¦ã„ã¾ã™ã€‚æ¥µã‚ã¦é«˜ã„æƒ³åƒåŠ›ã¨ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ãªæ‰èƒ½ã®æŒã¡ä¸»ã§ã™ã€‚"];
            
            document.getElementById("resP_life").innerHTML = "<strong style='color:var(--gold-light);'>ã€ç”Ÿå‘½ç·šã€‘</strong> " + p_lifes[Math.floor(random() * p_lifes.length)];
            document.getElementById("resP_head").innerHTML = "<strong style='color:var(--gold-light);'>ã€çŸ¥èƒ½ç·šã€‘</strong> " + p_heads[Math.floor(random() * p_heads.length)];
            document.getElementById("resP_heart").innerHTML = "<strong style='color:var(--gold-light);'>ã€æ„Ÿæƒ…ç·šã€‘</strong> äººå·®ã—æŒ‡ã¨ä¸­æŒ‡ã®é–“ã«å‘ã‹ã£ã¦æ€¥ã‚«ãƒ¼ãƒ–ã‚’æã„ã¦ã„ã¾ã™ã€‚æƒ…ç†±çš„ã§æ„›æƒ…è¡¨ç¾ãŒè±Šã‹ã§ã™ã€‚";
            document.getElementById("resP_fate").innerHTML = "<strong style='color:var(--gold-light);'>ã€é‹å‘½ç·šã€‘</strong> æ‰‹é¦–ã®ä¸­å¤®ã‹ã‚‰ä¸­æŒ‡ã«å‘ã‹ã£ã¦çªãæŠœã‘ã¦ã„ã¾ã™ã€‚è‡ªåˆ†ã®å®ŸåŠ›ã ã‘ã§æˆåŠŸã‚’ç¯‰ãä¸Šã’ã‚‹è‡ªå·±å®Ÿç¾åŠ›ã‚’æŒã£ã¦ã„ã¾ã™ã€‚";
            
            document.getElementById("resP_future").innerHTML = `<p>æŠ½å‡ºã•ã‚ŒãŸæ³¢å½¢ã‹ã‚‰äºˆæ¸¬ã™ã‚‹ã¨ã€<span class='palm-highlight'>æ•°å¹´ä»¥å†…ã«ã‚ãªãŸã®äººç”Ÿã®ã‚¹ãƒ†ãƒ¼ã‚¸ãŒä¸€æ®µéšä¸ŠãŒã‚‹ã€ŒåŠ‡çš„ãªé£›èºã®æ™‚æœŸã€</span>ãŒè¨ªã‚Œã¾ã™ã€‚</p>`;
            document.getElementById("resP_love").innerHTML = "ä»Šå¾Œã®æ‹æ„›é‹ã¯ç©ã‚„ã‹ãªæ„›æƒ…ã«æº€ã¡ãŸæ™‚æœŸã«å…¥ã‚Šã¾ã™ã€‚ç„¡ç†ã‚’ã›ãšç´ ã®è‡ªåˆ†ã‚’å‡ºã›ã‚‹ç›¸æ‰‹ã¨ã®é–¢ä¿‚ãŒæ·±ã¾ã‚Šã¾ã™ã€‚";
            document.getElementById("resP_work").innerHTML = "ä»•äº‹é‹ã¯ç‹¬è‡ªã®æ‰èƒ½ã‚„ã‚¢ã‚¤ãƒ‡ã‚¢ãŒçˆ†ç™ºçš„ã«è©•ä¾¡ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ãŒå‡ºã¦ã„ã¾ã™ã€‚ç›´æ„Ÿã«å¾“ã†ã“ã¨ã§é‡‘é‹ã‚‚è·³ã­ä¸ŠãŒã‚Šã¾ã™ã€‚";
            
            document.getElementById("res-palm").classList.add("active");
        });
    }

    // ==========================================
    // ğŸ”® 4. æœ¬æ ¼ã‚¿ãƒ­ãƒƒãƒˆå ã„ (æ‚©ã¿å®Œå…¨å¯¾å¿œAIãƒ­ã‚¸ãƒƒã‚¯)
    // ==========================================
    const majorArcana = [
        { ja: "æ„šè€…", en: "The Fool", num: "0", p: "ç„¡é™ã®å¯èƒ½æ€§ã€è‡ªç”±ã€ç›´æ„Ÿçš„ãªè¡Œå‹•ã€æ–°ã—ã„å§‹ã¾ã‚Š", r: "ç„¡è¨ˆç”»ã€ç¾å®Ÿé€ƒé¿ã€ç„¡è²¬ä»»ãªè¡Œå‹•ã€æº–å‚™ä¸è¶³" },
        { ja: "é­”è¡“å¸«", en: "The Magician", num: "I", p: "å‰µé€ åŠ›ã€æ–°ãŸãªå§‹ã¾ã‚Šã€è‡ªä¿¡ã€æ‰èƒ½ã®é–‹èŠ±", r: "å„ªæŸ”ä¸æ–­ã€ã‚¹ãƒ©ãƒ³ãƒ—ã€æ‰èƒ½ã®ç„¡é§„é£ã„ã€æ¶ˆæ¥µçš„" },
        { ja: "å¥³æ•™çš‡", en: "The High Priestess", num: "II", p: "ç›´æ„Ÿã€ç²¾ç¥æ€§ã€é™ã‹ãªè¦³å¯Ÿã€æ·±ã„ç†è§£åŠ›", r: "æ‰¹åˆ¤çš„ã€ç§˜å¯†ã®æš´éœ²ã€å†·é…·ã•ã€æ„Ÿæƒ…ã®æŠ‘åœ§" },
        { ja: "å¥³å¸", en: "The Empress", num: "III", p: "è±Šã‹ã•ã€æ„›æƒ…ã®æˆå°±ã€åŒ…å®¹åŠ›ã€å¤§ã„ãªã‚‹å®Ÿã‚Š", r: "å«‰å¦¬ã€éä¿è­·ã€æ€ æƒ°ãªç”Ÿæ´»ã€ç›¸æ‰‹ã¸ã®ä¾å­˜" },
        { ja: "çš‡å¸", en: "The Emperor", num: "IV", p: "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã€å®‰å®šã€è²¬ä»»æ„Ÿã€ç¢ºå›ºãŸã‚‹åŸºç›¤", r: "æ”¯é…æ¬²ã€é ‘å›ºã€ç‹¬è£çš„ã€ãƒ—ãƒ¬ãƒƒã‚·ãƒ£ãƒ¼" },
        { ja: "æ•™çš‡", en: "The Hierophant", num: "V", p: "ä¼çµ±ã€ä¿¡é ¼ã€ç²¾ç¥çš„ãªå°ãã€ãƒ«ãƒ¼ãƒ«ã¸ã®å¾“é †", r: "æŸç¸›ã€è¦–é‡ã®ç‹­ã•ã€å­¤ç«‹ã€å¤ã„ä¾¡å€¤è¦³ã¸ã®å›ºåŸ·" },
        { ja: "æ‹äºº", en: "The Lovers", num: "VI", p: "æƒ…ç†±çš„ãªæ„›ã€æ­£ã—ã„é¸æŠã€å¿ƒã‹ã‚‰ã®å…±é³´", r: "èª˜æƒ‘ã€é–¢ä¿‚ã®å´©å£Šã€èª¤ã£ãŸé¸æŠã€å„ªæŸ”ä¸æ–­" },
        { ja: "æˆ¦è»Š", en: "The Chariot", num: "VII", p: "å‰é€²ã€å‹åˆ©ã€å›°é›£ã®å…‹æœã€å¼·ã„æ„å¿—åŠ›", r: "æš´èµ°ã€æŒ«æŠ˜ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«å–ªå¤±ã€ç„¦ç‡¥æ„Ÿ" },
        { ja: "åŠ›", en: "Strength", num: "VIII", p: "å¿è€ã€ç²¾ç¥çš„ãªå¼·ã•ã€å’Œè§£ã€ç„¡å„Ÿã®æ„›", r: "ç„¡æ°—åŠ›ã€è‡ªä¿¡å–ªå¤±ã€æ„Ÿæƒ…ã®çˆ†ç™ºã€æ¬²æœ›ã¸ã®æ•—åŒ—" },
        { ja: "éš è€…", en: "The Hermit", num: "IX", p: "å†…çœã€çœŸç†ã®æ¢æ±‚ã€ä¸€äººã®æ™‚é–“ã§ã®æ‚Ÿã‚Š", r: "å­¤ç‹¬ã€å¼•ãã“ã‚‚ã‚Šã€ç¾å®Ÿé€ƒé¿ã€é–‰é–çš„" },
        { ja: "é‹å‘½ã®è¼ª", en: "Wheel of Fortune", num: "X", p: "å¥½è»¢ã€ãƒãƒ£ãƒ³ã‚¹åˆ°æ¥ã€é‹å‘½çš„ãªç´ æ™´ã‚‰ã—ã„å‡ºæ¥äº‹", r: "æ‚ªåŒ–ã€ã™ã‚Œé•ã„ã€ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’é€ƒã™ã€ä¸é‹ã®é€£é–" },
        { ja: "æ­£ç¾©", en: "Justice", num: "XI", p: "å…¬å¹³ã€æ±ºæ–­ã€ãƒãƒ©ãƒ³ã‚¹ã®å–ã‚ŒãŸé–¢ä¿‚ã€èª å®Ÿã•", r: "ä¸å…¬å¹³ã€åè¦‹ã€æ„Ÿæƒ…çš„ãªå¯¾ç«‹ã€ãƒ¢ãƒ©ãƒ«ã®æ¬ å¦‚" },
        { ja: "åŠã‚‹ã•ã‚ŒãŸç”·", en: "The Hanged Man", num: "XII", p: "è¦–ç‚¹ã®å¤‰åŒ–ã€è‡ªå·±çŠ ç‰²ã€ä¿®è¡Œã‚’é€šã—ã¦ã®æ‚Ÿã‚Š", r: "å¾’åŠ´ã€æˆ‘æ…¢ã®é™ç•Œã€èº«å‹•ããŒå–ã‚Œãªã„è‹¦æ‚©" },
        { ja: "æ­»ç¥", en: "Death", num: "XIII", p: "å¼·åˆ¶çš„ãªçµ‚äº†ã€å†ç”Ÿã€æ–°ã—ã„ã‚¹ãƒ†ãƒ¼ã‚¸ã¸ã®ç§»è¡Œ", r: "åŸ·ç€ã€åœæ»ã€çµ‚ã‚ã‚‰ã›ã‚‰ã‚Œãªã„è‹¦ã—ã¿ã€å¤‰åŒ–ã¸ã®æã‚Œ" },
        { ja: "ç¯€åˆ¶", en: "Temperance", num: "XIV", p: "èª¿å’Œã€ãƒãƒ©ãƒ³ã‚¹ã€è‡ªç„¶ä½“ã§ã®æˆåŠŸã€è¦‹äº‹ãªèåˆ", r: "ä¸æ‘‚ç”Ÿã€æ„Ÿæƒ…ã®ä¹±ã‚Œã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ä¸è¶³ã€æµªè²»" },
        { ja: "æ‚ªé­”", en: "The Devil", num: "XV", p: "ç”˜ã„èª˜æƒ‘ã€åŸ·ç€ã€æ–­ã¡åˆ‡ã‚Œãªã„é–¢ä¿‚ã€ç‰©è³ªçš„æ¬²æœ›", r: "æŸç¸›ã‹ã‚‰ã®è§£æ”¾ã€æ‚ªç¸ã‚’åˆ‡ã‚‹ã€åŸ·ç€ã®çµ‚ã‚ã‚Š" },
        { ja: "å¡”", en: "The Tower", num: "XVI", p: "äºˆæœŸã›ã¬ãƒˆãƒ©ãƒ–ãƒ«ã€ä¾¡å€¤è¦³ã®å´©å£Šã€è¡æ’ƒçš„ãªãƒªã‚»ãƒƒãƒˆ", r: "å´©å£Šã®å›é¿ã€é•·å¼•ãå•é¡Œã€æã‚Œã‹ã‚‰ã®é€ƒé¿" },
        { ja: "æ˜Ÿ", en: "The Star", num: "XVII", p: "å¸Œæœ›ã€ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€ç†æƒ³ã®å®Ÿç¾ã€æ·±ã„ç™’ã‚„ã—", r: "çµ¶æœ›ã€é«˜ã™ãã‚‹ç†æƒ³ã€è¦‹è¾¼ã¿é•ã„ã€ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®æ¯æ¸‡" },
        { ja: "æœˆ", en: "The Moon", num: "XVIII", p: "ä¸å®‰ã€è¿·ã„ã€éš ã•ã‚ŒãŸçœŸå®Ÿã€æ½œåœ¨æ„è­˜ã®ææ€–", r: "éœ§ãŒæ™´ã‚Œã‚‹ã€ç›´æ„Ÿã®å†´ãˆã€ä¸å®‰ã‹ã‚‰ã®è§£æ”¾" },
        { ja: "å¤ªé™½", en: "The Sun", num: "XIX", p: "å¤§æˆåŠŸã€å–œã³ã€ç¥ç¦ã€ã‚¨ãƒãƒ«ã‚®ãƒ¼ã®åœ§å€’çš„ãªçˆ†ç™º", r: "è¨ˆç”»ã®é…ã‚Œã€ä¸€æ™‚çš„ãªã‚¨ãƒãƒ«ã‚®ãƒ¼ä¸è¶³ã€è‡ªå·±ä¸­å¿ƒçš„ãªæ…‹åº¦" },
        { ja: "å¯©åˆ¤", en: "Judgement", num: "XX", p: "å¾©æ´»ã€å¥‡è·¡çš„ãªå†ãƒãƒ£ãƒ¬ãƒ³ã‚¸ã€æœ€çµ‚çš„ãªæ±ºæ–­ã¨æ•‘æ¸ˆ", r: "éå»ã¸ã®å¾Œæ‚”ã€ãƒãƒ£ãƒ³ã‚¹ã‚’è¦‹é€ƒã™ã€è¨±ã•ã‚Œãªã„æ€ã„" },
        { ja: "ä¸–ç•Œ", en: "The World", num: "XXI", p: "å®Œå…¨ãªã‚‹æˆå°±ã€ãƒãƒƒãƒ”ãƒ¼ã‚¨ãƒ³ãƒ‰ã€ç›®çš„ã®å®Œç’§ãªé”æˆ", r: "æœªå®Œæˆã€ä¸­é€”åŠç«¯ã€ã‚¹ãƒ©ãƒ³ãƒ—ã€ä¸å®Œå…¨ç‡ƒç„¼ãªçµæœ«" }
    ];

    function generateWorryAnswer(worry, futureCard, isFutureReversed) {
        const w = worry.trim();
        let category = "general";
        if (/å½¼|å½¼å¥³|é€£çµ¡|å¾©ç¸|å¥½ã|æ„›|çµå©š|å¤«|å¦»|æ‹|å‡ºä¼šã„|åˆ¥ã‚Œ|ä¸å€«/.test(w)) category = "love";
        else if (/ä»•äº‹|è¾ã‚|è»¢è·|ä¸Šå¸|ä¼šç¤¾|äººé–“é–¢ä¿‚|å°±è·|ã‚­ãƒ£ãƒªã‚¢|åŒåƒš|ãƒ‘ãƒ¯ãƒãƒ©/.test(w)) category = "work";
        else if (/é‡‘|å€Ÿé‡‘|åå…¥|è²¯é‡‘|å®ãã˜|ç”Ÿæ´»/.test(w)) category = "money";

        const worrySnippet = w.length > 20 ? w.substring(0, 20) + "..." : w;
        const meaning = isFutureReversed ? futureCard.r : futureCard.p;
        const posStr = isFutureReversed ? "é€†ä½ç½®" : "æ­£ä½ç½®";
        
        let ans = `<p><span style="color:var(--text-sub); font-size:12px; border-bottom:1px dashed rgba(255,255,255,0.2); padding-bottom:5px; margin-bottom:10px; display:inline-block;">ã€ã‚ãªãŸã®æ‚©ã¿ï¼šã€Œ${worrySnippet}ã€ã¸ã®å›ç­”ã€‘</span></p>`;
        
        ans += `<p>ã‚ãªãŸãŒæ›¸ãè¾¼ã‚“ã§ãã‚ŒãŸãã®åˆ‡å®Ÿãªæ‚©ã¿ã€ã—ã£ã‹ã‚Šã¨å¤§ã‚¢ãƒ«ã‚«ãƒŠã®æ³¢å‹•ã«å±Šã„ã¦ã„ã¾ã™ã€‚æœªæ¥ã®ä½ç½®ã«å‡ºãŸã€${futureCard.ja}ã€ã®${posStr}ã¯ã€ã¾ã•ã«ã“ã®æ‚©ã¿ã«å¯¾ã™ã‚‹æœ€çµ‚å›ç­”ã¨ã—ã¦<span class="tarot-highlight">ã€${meaning}ã€‘</span>ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã£ã¦ãã¾ã—ãŸã€‚</p>`;

        if (category === "love") {
            if (!isFutureReversed) ans += `<p>ä»Šã‚ãªãŸãŒæŠ±ãˆã¦ã„ã‚‹æ‹æ„›ã¸ã®ä¸å®‰ã¯ã€é ã‹ã‚‰ãšæ„›ã¨èª¿å’Œã®æ–¹å‘ã¸å‹•ãå‡ºã—ã¾ã™ã€‚ç›¸æ‰‹ã®æ°—æŒã¡ã‚’ç„¡ç†ã«æ¢ã£ãŸã‚Šã€ç„¦ã£ã¦ç™½é»’ã¤ã‘ã‚ˆã†ã¨ã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚ãªãŸãŒè‡ªä¿¡ã‚’æŒã¡ã€åŸ·ç€ã‚’æ‰‹æ”¾ã—ãŸæ™‚ã€ç›¸æ‰‹ã‹ã‚‰è‡ªç„¶ã¨å¼•ãå¯„ã›ã‚‰ã‚Œã¦ãã‚‹ã§ã—ã‚‡ã†ã€‚</p>`;
            else ans += `<p>ä»Šã¯å°‘ã—ç›¸æ‰‹ã¨ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ãŒã™ã‚Œé•ã„ã‚„ã™ã„ã€Œè©¦ç·´ã®æ™‚æœŸã€ã®ã‚ˆã†ã§ã™ã€‚æ„Ÿæƒ…ã«ä»»ã›ã¦è¡Œå‹•ã‚’èµ·ã“ã™ã¨é€†åŠ¹æœã«ãªã‚‹æš—ç¤ºãŒã‚ã‚Šã¾ã™ã€‚ã¾ãšã¯ä¸€åº¦ç«‹ã¡æ­¢ã¾ã‚Šã€ç›¸æ‰‹ã¸ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’æ‰‹æ”¾ã—ã¦ã€è‡ªåˆ†ã®å¿ƒã‚’ç™’ã‚„ã™ã“ã¨ã«å°‚å¿µã—ã¦ãã ã•ã„ã€‚</p>`;
        } else if (category === "work") {
            if (!isFutureReversed) ans += `<p>ä»•äº‹ã‚„ã‚­ãƒ£ãƒªã‚¢ã§ç©ã¿é‡ã­ã¦ããŸæˆ‘æ…¢ã¯æ±ºã—ã¦ç„¡é§„ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ã‚‚ãªãè¦–ç•ŒãŒã‚¯ãƒªã‚¢ã«ãªã‚Šã€ã‚ãªãŸã‚’æ­£å½“ã«è©•ä¾¡ã—ã¦ãã‚Œã‚‹ç’°å¢ƒãŒæ•´ã„ã¾ã™ã€‚ç›´æ„Ÿã«å¾“ã£ã¦è¸ã¿å‡ºã™ã¹ãã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒæ¥ã¦ã„ã¾ã™ã€‚</p>`;
            else ans += `<p>ç„¦ã‚Šã‹ã‚‰çªç™ºçš„ãªæ±ºæ–­ï¼ˆæ€¥ãªé€€è·ãªã©ï¼‰ã‚’ä¸‹ã™ã®ã¯å°‘ã—å¾…ã£ãŸæ–¹ãŒè‰¯ã•ãã†ã§ã™ã€‚ä»Šã¯æ°´é¢ä¸‹ã§ã‚¹ã‚­ãƒ«ã‚¢ãƒƒãƒ—ã‚„æƒ…å ±åé›†ã‚’é€²ã‚ã‚‹ã¹ãæ™‚æœŸã§ã™ã€‚æ™‚æœŸãŒæ¥ã‚Œã°ã€é©šãã»ã©ã‚¹ãƒ ãƒ¼ã‚ºã«æ¬¡ã®æ‰‰ãŒé–‹ãã¾ã™ã€‚</p>`;
        } else {
            if (!isFutureReversed) ans += `<p>æš—ã„ãƒˆãƒ³ãƒãƒ«ã®å‡ºå£ã¯ã‚‚ã†ã™ããã“ã§ã™ã€‚ã‚ãªãŸãŒä»Šæ„Ÿã˜ã¦ã„ã‚‹è‹¦ã—ã¿ã¯ã€æ¬¡ã®å¤§ããªã‚¹ãƒ†ãƒ¼ã‚¸ã¸é€²ã‚€ãŸã‚ã®ã€Œæˆé•·ç—›ã€ã«éãã¾ã›ã‚“ã€‚æã‚Œã‚’æ‰‹æ”¾ã—ã€è‡ªåˆ†ã®ç›´æ„Ÿã‚’ä¿¡ã˜ã¦é€²ã‚“ã§ãã ã•ã„ã€‚</p>`;
            else ans += `<p>ã‚ãªãŸã¯ä»Šã€ä¸€äººã§å…¨ã¦ã‚’æŠ±ãˆè¾¼ã‚‚ã†ã¨ã—ã™ãã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚çŠ¶æ³ã‚’ç„¡ç†ã«ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã—ã‚ˆã†ã¨ã™ã‚‹ã®ã‚’ã‚„ã‚ã€ä¸€åº¦æµã‚Œã«èº«ã‚’ä»»ã›ã¦ã¿ã¦ãã ã•ã„ã€‚ä¸è¦ãªç¸ã¯è‡ªç„¶ã¨é›¢ã‚Œã€æœ¬å½“ã«å¿…è¦ãªã‚‚ã®ã ã‘ãŒæ®‹ã‚Šã¾ã™ã€‚</p>`;
        }
        return ans;
    }

    function startTarotOracle() {
        const name = document.getElementById("name4").value.trim(); const dob = document.getElementById("dob4").value; const worry = document.getElementById("worry4").value.trim();
        if (!name || !dob || !worry) return alert("é­‚ã®æ³¢é•·ã‚’åˆã‚ã›ã‚‹ãŸã‚ã€ãŠåå‰ãƒ»ç”Ÿå¹´æœˆæ—¥ãƒ»å…·ä½“çš„ãªæ‚©ã¿ã¯ã™ã¹ã¦å¿…é ˆã§ã™ã€‚");

        showLoading("SHUFFLING TAROT DECK...", "var(--accent-tarot)", false, () => {
            const seedStr = name + dob + worry + "tarot_ultimate_final_v5"; const random = getSeededRandom(seedStr); 
            
            let deck = [...majorArcana]; let drawnCards = [];
            for(let i=0; i<3; i++) {
                let idx = Math.floor(random() * deck.length);
                let card = deck.splice(idx, 1)[0];
                let isReversed = random() > 0.6; 
                drawnCards.push({ card: card, isReversed: isReversed });
            }

            document.getElementById("resName4").innerText = name + " æ§˜";

            for(let i=0; i<3; i++) {
                const c = drawnCards[i]; const pos = c.isReversed ? 'é€†ä½ç½®' : 'æ­£ä½ç½®'; const meaning = c.isReversed ? c.card.r : c.card.p;
                
                document.getElementById(`tcNum${i+1}`).innerText = c.card.num;
                document.getElementById(`tcName${i+1}`).innerHTML = `${c.card.ja}<br><span style="font-size:9px; opacity:0.7;">${c.card.en}</span>`;
                const posEl = document.getElementById(`tcPos${i+1}`);
                posEl.className = `t-front-pos ${c.isReversed ? 't-pos-rev' : 't-pos-up'}`; posEl.innerText = pos;

                let text = "";
                if (i === 0) text = `<p>ã€éå»ãƒ»æ ¹æœ¬åŸå› ã€‘ã®é ˜åŸŸã«å±•é–‹ã•ã‚ŒãŸã®ã¯ã€${c.card.ja}ã€ã®${pos}ã§ã™ã€‚</p><p>ã“ã®ã‚«ãƒ¼ãƒ‰ã¯<span class='tarot-highlight'>ã€${meaning}ã€‘</span>ã¨ã„ã†å¼·çƒˆãªæ³¢å‹•ã‚’æ”¾ã£ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¾ã§ã‚ãªãŸãŒç„¡æ„è­˜ã®ã†ã¡ã«æŠ±ãˆã¦ããŸæ„Ÿæƒ…ã‚„ã€äººçŸ¥ã‚ŒãšèƒŒè² ã£ã¦ããŸé‡è·ãŒã€ä»Šã®æ‚©ã¿ã®ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã‚’ä½œã£ã¦ã„ã¾ã™ã€‚</p>`;
                else if (i === 1) text = `<p>ã€ç¾åœ¨ã®çŠ¶æ³ã¨æ·±å±¤å¿ƒç†ã€‘ã‚’æ˜ ã—å‡ºã™ä½ç½®ã«ã€${c.card.ja}ã€ã®${pos}ãŒç¾ã‚Œã¾ã—ãŸã€‚</p><p>ã¾ã•ã«ä»Šã€ã‚ãªãŸã¯<span class='tarot-highlight'>ã€${meaning}ã€‘</span>ã¨ã„ã†å®‡å®™ã®å¼•åŠ›ã«åŒ…ã¾ã‚Œã¦ã„ã¾ã™ã€‚è¡¨é¢çš„ã«ã¯ã©ã†å–ã‚Šç¹•ã£ã¦ã„ã¦ã‚‚ã€ã‚ãªãŸã®é­‚ã¯ä»Šã“ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼çŠ¶æ…‹ã®åªä¸­ã«ã‚ã‚Šã¾ã™ã€‚</p>`;
                else text = `<p>ã‚ãªãŸãŒå–ã‚‹ã¹ãè¡Œå‹•ã®ã€æœ€çµ‚çµæœãƒ»æœªæ¥ã€‘ã‚’ç¤ºã™ä½ç½®ã«å°ã‹ã‚ŒãŸã®ã¯ã€${c.card.ja}ã€ã®${pos}ã§ã™ã€‚</p><p>ã“ã®ã‚«ãƒ¼ãƒ‰ãŒæŒ‡ã—ç¤ºã™<span class='tarot-highlight'>ã€${meaning}ã€‘</span>ã¨ã„ã†æš—ç¤ºã¯ã€ä»Šå¾Œã®ã‚ãªãŸã«è¨ªã‚Œã‚‹æ±ºå®šçš„ãªå‡ºæ¥äº‹ã‚’äºˆå‘Šã—ã¦ã„ã¾ã™ã€‚ã“ã®å•“ç¤ºã‚’è­¦å‘Šã¨ã—ã¦å—ã‘å–ã‚‹ã‹ã€ç¥ç¦ã¨ã—ã¦å—ã‘å–ã‚‹ã‹ã§é‹å‘½ã®è»Œé“ãŒåˆ†å²ã—ã¾ã™ã€‚</p>`;
                
                document.getElementById(i===0 ? "resT_past" : i===1 ? "resT_present" : "resT_future").innerHTML = text;
            }

            // å€‹åˆ¥ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã®ç”Ÿæˆ
            let adviceMsg = generateWorryAnswer(worry, drawnCards[2].card, drawnCards[2].isReversed);
            document.getElementById("tarotFinalMsg").innerHTML = adviceMsg;

            document.getElementById("res-tarot").classList.add("active");

            setTimeout(() => document.getElementById("tCard1").classList.add("flipped"), 600);
            setTimeout(() => document.getElementById("tCard2").classList.add("flipped"), 1400);
            setTimeout(() => document.getElementById("tCard3").classList.add("flipped"), 2200);
        });
    }
</script>
</body>
</html>
