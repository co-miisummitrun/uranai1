<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <meta name="google-site-verification" content="vQkgsiI6ESyUE4NxB11bOJWI2j2tAi0MYAKGw4ZHCb8" />
    <title>æ˜Ÿå±‘ã®ç¥è¨— - æœ¬æ ¼ã‚¹ãƒ”ãƒªãƒãƒ¥ã‚¢ãƒ«å ã„ -</title>
    <meta name="description" content="ã‚ãªãŸã®ãŠåå‰ã¨ç”Ÿå¹´æœˆæ—¥ã‹ã‚‰ã€ç”Ÿã¾ã‚ŒæŒã£ãŸæœ¬è³ªã¨æ¯æ—¥ã®é‹å‹¢ã‚’å°ãå‡ºã™æœ¬æ ¼ã‚¹ãƒ”ãƒªãƒãƒ¥ã‚¢ãƒ«å ã„ã€‚">
    <link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --gold: #e2c07d;
            --gold-light: #f9e5b5;
            --bg-glass: rgba(15, 10, 25, 0.85);
            --border-color: rgba(226, 192, 125, 0.3);
            --accent: #8a63a5;
        }
        
        body {
            margin: 0; padding: 20px 10px; min-height: 100vh;
            display: flex; align-items: flex-start; justify-content: center;
            background: radial-gradient(circle at center, #1a1025 0%, #05020a 100%);
            font-family: 'Shippori Mincho', serif; color: #f4ede4;
            box-sizing: border-box; overflow-x: hidden;
        }

        /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼è£…é£¾ */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: rgba(0,0,0,0.3); }
        ::-webkit-scrollbar-thumb { background: var(--gold); border-radius: 3px; }

        /* æ˜Ÿå±‘ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .stars {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: -1;
            background-image: 
                radial-gradient(1.5px 1.5px at 20px 30px, #fff, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 50px 70px, #fff, rgba(0,0,0,0)),
                radial-gradient(1px 1px at 90px 40px, #fff, rgba(0,0,0,0)),
                radial-gradient(2px 2px at 130px 80px, #fff, rgba(0,0,0,0)),
                radial-gradient(1.5px 1.5px at 160px 120px, #fff, rgba(0,0,0,0));
            background-repeat: repeat; background-size: 250px 250px;
            animation: twinkle 5s infinite alternate; opacity: 0.5;
        }
        @keyframes twinkle { 0% { opacity: 0.2; } 100% { opacity: 0.7; transform: scale(1.05); } }

        /* ãƒ¡ã‚¤ãƒ³ãƒ‘ãƒãƒ« */
        .glass-panel {
            background: var(--bg-glass); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            border: 1px solid var(--border-color); border-radius: 16px;
            padding: 35px 25px; width: 100%; max-width: 500px;
            box-shadow: 0 15px 40px rgba(0,0,0,0.8), inset 0 0 20px rgba(226,192,125,0.05);
        }

        h1 { font-size: 26px; color: var(--gold); margin: 0 0 5px; text-align: center; letter-spacing: 4px; text-shadow: 0 0 15px rgba(226,192,125,0.5); }
        p.subtitle { font-size: 13px; color: #a497b5; margin-bottom: 30px; text-align: center; letter-spacing: 2px; }

        /* å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  */
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-size: 13px; color: var(--gold-light); letter-spacing: 1px; }
        input {
            width: 100%; padding: 14px; background: rgba(0,0,0,0.5);
            border: 1px solid var(--border-color); border-radius: 8px; color: #fff;
            font-size: 16px; font-family: inherit; box-sizing: border-box; transition: 0.3s;
            color-scheme: dark;
        }
        input:focus { outline: none; border-color: var(--gold); box-shadow: 0 0 12px rgba(226,192,125,0.4); }

        button.main-btn {
            width: 100%; padding: 16px; margin-top: 10px;
            background: linear-gradient(135deg, #8b6b32, #e2c07d, #8b6b32); background-size: 200% auto;
            color: #111; font-family: inherit; font-size: 16px; font-weight: bold;
            border: none; border-radius: 30px; cursor: pointer; letter-spacing: 2px;
            transition: 0.4s; box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }
        button.main-btn:hover { background-position: right center; box-shadow: 0 0 20px rgba(226,192,125,0.6); transform: translateY(-2px); }

        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° */
        #loading { display: none; padding: 40px 0; text-align: center; }
        .magic-circle {
            width: 70px; height: 70px; margin: 0 auto 20px; border: 2px dashed var(--gold); border-radius: 50%;
            animation: spin 5s linear infinite; position: relative;
        }
        .magic-circle::before, .magic-circle::after {
            content: ""; position: absolute; top: 5%; left: 5%; right: 5%; bottom: 5%;
            border: 1px solid rgba(226,192,125,0.4); animation: spin-reverse 7s linear infinite;
        }
        .magic-circle::after { transform: rotate(45deg); animation: spin-offset 7s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        @keyframes spin-reverse { 100% { transform: rotate(-360deg); } }
        @keyframes spin-offset { 0% { transform: rotate(45deg); } 100% { transform: rotate(-315deg); } }
        .loading-text { color: var(--gold); font-size: 14px; letter-spacing: 2px; animation: blink 1.5s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }

        /* çµæœç”»é¢ */
        #result-screen { display: none; animation: fadeIn 1s ease forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(15px); } to { opacity: 1; transform: translateY(0); } }

        .section-header { font-size: 16px; color: var(--gold); margin: 30px 0 15px; display: flex; align-items: center; gap: 10px; }
        .section-header::before, .section-header::after { content: ""; flex: 1; height: 1px; background: var(--border-color); }

        /* åŸºæœ¬æ€§è³ª */
        .profile-box { text-align: center; background: rgba(0,0,0,0.3); padding: 20px; border-radius: 12px; border: 1px solid rgba(226,192,125,0.2); }
        .profile-name { font-size: 20px; color: #fff; margin-bottom: 10px; letter-spacing: 1px;}
        .profile-tags { font-size: 14px; color: var(--gold-light); margin-bottom: 15px; }
        .profile-desc { font-size: 14px; line-height: 1.8; color: #d0c8dd; text-align: left; }

        /* ç·åˆé‹å‹¢ */
        .score-box { text-align: center; margin: 25px 0; }
        .fortune-rank { font-size: 46px; color: var(--gold); font-weight: bold; text-shadow: 0 0 20px rgba(226,192,125,0.7); letter-spacing: 6px; margin-bottom: 5px; }
        .score-num { font-size: 24px; color: #fff; font-weight: bold; }
        .score-num span { font-size: 14px; color: #a497b5; font-weight: normal; }

        /* ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ï¼ˆãƒãƒ¼ï¼‰ */
        .status-box { background: rgba(0,0,0,0.3); padding: 20px; border-radius: 12px; border: 1px solid rgba(226,192,125,0.2); }
        .status-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px; }
        .status-row:last-child { margin-bottom: 0; }
        .status-label { font-size: 13px; color: #eaeaeb; width: 50px; }
        .status-bar-bg { flex-grow: 1; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; margin: 0 15px; overflow: hidden; }
        .status-bar-fill { height: 100%; background: linear-gradient(90deg, var(--accent), var(--gold)); border-radius: 4px; width: 0%; transition: width 1.5s ease-out; }
        .status-value { font-size: 14px; color: var(--gold); width: 40px; text-align: right; font-weight: bold; }

        /* ç¥è¨—ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
        .oracle-msg {
            font-size: 14.5px; line-height: 2; color: #fff; padding: 20px;
            background: linear-gradient(180deg, rgba(226,192,125,0.1) 0%, rgba(0,0,0,0.5) 100%);
            border: 1px solid var(--border-color); border-radius: 12px;
            position: relative; margin-bottom: 30px;
        }
        .oracle-msg::before { content: "â€œ"; position: absolute; top: -10px; left: 10px; font-size: 40px; color: var(--gold); opacity: 0.4; font-family: sans-serif; }

        /* ãƒ©ãƒƒã‚­ãƒ¼è¦ç´  */
        .lucky-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 30px; }
        .lucky-item { background: rgba(226,192,125,0.05); border: 1px solid rgba(226,192,125,0.15); padding: 12px; border-radius: 8px; text-align: center; }
        .lucky-label { font-size: 11px; color: #a497b5; display: block; margin-bottom: 5px; }
        .lucky-value { font-size: 14px; color: var(--gold-light); font-weight: bold; }

        .btn-retry {
            width: 100%; padding: 14px; background: transparent; border: 1px solid var(--border-color);
            color: var(--gold); border-radius: 30px; cursor: pointer; font-size: 15px; transition: 0.3s;
        }
        .btn-retry:hover { background: rgba(226,192,125,0.1); color: #fff; }
    </style>
</head>
<body>

<div class="stars"></div>

<div class="glass-panel">
    <div id="input-screen">
        <h1>æ˜Ÿå±‘ã®ç¥è¨—</h1>
        <p class="subtitle">ã€œ ã‚ãªãŸã®é­‚ã®è»Œè·¡ã‚’èª­ã¿è§£ã ã€œ</p>

        <div class="form-group">
            <label for="userName">ãŠåå‰</label>
            <input type="text" id="userName" placeholder="ä¾‹ï¼šæ˜Ÿé‡ çµè¡£" autocomplete="off">
        </div>

        <div class="form-group">
            <label for="userDob">ç”Ÿå¹´æœˆæ—¥</label>
            <input type="date" id="userDob">
        </div>

        <button class="main-btn" onclick="startOracle()">é‹å‘½ã®æ‰‰ã‚’é–‹ã</button>
    </div>

    <div id="loading">
        <div class="magic-circle"></div>
        <div class="loading-text">ã‚¢ã‚«ã‚·ãƒƒã‚¯ãƒ¬ã‚³ãƒ¼ãƒ‰ã«æ¥ç¶šä¸­...</div>
    </div>

    <div id="result-screen">
        
        <div class="section-header">ã‚ãªãŸã®æœ¬è³ªã¨å®¿æ˜Ÿ</div>
        <div class="profile-box">
            <div class="profile-name" id="resName"></div>
            <div class="profile-tags">
                <span id="resZodiac"></span> ï½œ ã‚½ã‚¦ãƒ«ãƒŠãƒ³ãƒãƒ¼: <strong id="resDestinyNum"></strong>
            </div>
            <div class="profile-desc" id="resDestinyText"></div>
        </div>

        <div class="section-header"><span id="resDate"></span> ã®é‹å‹¢</div>
        <div class="score-box">
            <div class="fortune-rank" id="resRank"></div>
            <div class="score-num">ç·åˆã‚¹ã‚³ã‚¢ï¼š <span style="font-size:28px; color:var(--gold);" id="resScore">0</span><span> / 100ç‚¹</span></div>
        </div>

        <div class="status-box">
            <div class="status-row">
                <span class="status-label">æ‹æ„›é‹</span>
                <div class="status-bar-bg"><div class="status-bar-fill" id="barLove"></div></div>
                <span class="status-value" id="valLove"></span>
            </div>
            <div class="status-row">
                <span class="status-label">ä»•äº‹é‹</span>
                <div class="status-bar-bg"><div class="status-bar-fill" id="barWork"></div></div>
                <span class="status-value" id="valWork"></span>
            </div>
            <div class="status-row">
                <span class="status-label">é‡‘é‹</span>
                <div class="status-bar-bg"><div class="status-bar-fill" id="barMoney"></div></div>
                <span class="status-value" id="valMoney"></span>
            </div>
            <div class="status-row">
                <span class="status-label">å¥åº·é‹</span>
                <div class="status-bar-bg"><div class="status-bar-fill" id="barHealth"></div></div>
                <span class="status-value" id="valHealth"></span>
            </div>
        </div>

        <div class="lucky-grid">
            <div class="lucky-item"><span class="lucky-label">ãƒ©ãƒƒã‚­ãƒ¼ã‚«ãƒ©ãƒ¼</span><span class="lucky-value" id="resColor"></span></div>
            <div class="lucky-item"><span class="lucky-label">ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ </span><span class="lucky-value" id="resItem"></span></div>
            <div class="lucky-item"><span class="lucky-label">ãƒ©ãƒƒã‚­ãƒ¼ãƒŠãƒ³ãƒãƒ¼</span><span class="lucky-value" id="resNum"></span></div>
            <div class="lucky-item"><span class="lucky-label">å‰æ–¹ä½ï¼ˆæ–¹è§’ï¼‰</span><span class="lucky-value" id="resDir"></span></div>
        </div>

        <div class="section-header">æ˜Ÿå±‘ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸</div>
        <div class="oracle-msg" id="resMessage"></div>

        <button class="btn-retry" onclick="resetOracle()">åˆ¥ã®é‹å‘½ã‚’å ã†</button>
    </div>
</div>

<script>
    // --- ğŸ”®å ã„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ ---
    const destinyData = {
        1: "ã‚ãªãŸã¯ã€Œé–‹æ‹“è€…ã€ã®é­‚ã‚’æŒã£ã¦ã„ã¾ã™ã€‚å¼·ã„æ„å¿—ã¨ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’å‚™ãˆã€èª°ã‚‚æ­©ã‚“ã ã“ã¨ã®ãªã„é“ã‚’åˆ‡ã‚Šæ‹“ãåŠ›ãŒã‚ã‚Šã¾ã™ã€‚",
        2: "ã‚ãªãŸã¯ã€Œèª¿å’Œã‚’ã‚‚ãŸã‚‰ã™è€…ã€ã§ã™ã€‚ä»–è€…ã®æ„Ÿæƒ…ã«å¯„ã‚Šæ·»ã†æ·±ã„å…±æ„ŸåŠ›ã¨å„ªã—ã•ã‚’æŒã£ã¦ã„ã¾ã™ã€‚äººã¨äººã‚’ç¹‹ãæ¶ã‘æ©‹ã¨ãªã‚‹å­˜åœ¨ã§ã™ã€‚",
        3: "ã‚ãªãŸã¯ã€Œå‰µé€ ã™ã‚‹è¡¨ç¾è€…ã€ã§ã™ã€‚ç„¡é‚ªæ°—ãªå¥½å¥‡å¿ƒã¨è±Šã‹ãªæƒ³åƒåŠ›ã‚’æŒã¡ã€å‘¨å›²ã‚’æ˜ã‚‹ãç…§ã‚‰ã™å¤ªé™½ã®ã‚ˆã†ãªå­˜åœ¨ã§ã™ã€‚",
        4: "ã‚ãªãŸã¯ã€Œå®‰å®šã®ç¤ã€ã¨ãªã‚‹é­‚ã‚’æŒã£ã¦ã„ã¾ã™ã€‚çœŸé¢ç›®ã§èª å®Ÿã€ã‚³ãƒ„ã‚³ãƒ„ã¨åŠªåŠ›ã‚’ç©ã¿é‡ã­ã¦ç¢ºå›ºãŸã‚‹åŸºç›¤ã‚’ç¯‰ãå¤©æ‰ã§ã™ã€‚",
        5: "ã‚ãªãŸã¯ã€Œè‡ªç”±ãªå†’é™ºè€…ã€ã§ã™ã€‚å¤‰åŒ–ã‚’æã‚Œãšã€å¸¸ã«æ–°ã—ã„åˆºæ¿€ã‚„æœªçŸ¥ã®ä¸–ç•Œã‚’æ±‚ã‚ã‚‹ã‚¨ãƒãƒ«ã‚®ãƒƒã‚·ãƒ¥ãªæ€§è³ªã‚’æŒã£ã¦ã„ã¾ã™ã€‚",
        6: "ã‚ãªãŸã¯ã€Œæ„›ã¨å¥‰ä»•ã®å®ˆè­·è€…ã€ã§ã™ã€‚æ·±ã„æ…ˆæ„›ã®å¿ƒã‚’æŒã¡ã€å®¶æ—ã‚„ä»²é–“ã‚’å…¨èº«å…¨éœŠã§å®ˆã‚ŠæŠœãå¼·ã•ãŒã‚ã‚Šã¾ã™ã€‚",
        7: "ã‚ãªãŸã¯ã€ŒçœŸç†ã®æ¢æ±‚è€…ã€ã§ã™ã€‚é‹­ã„æ´å¯ŸåŠ›ã¨åˆ†æåŠ›ã‚’æŒã¡ã€ç‰©äº‹ã®æœ¬è³ªã‚’è§£ãæ˜ã‹ãã†ã¨ã™ã‚‹å“²å­¦è€…ã§ã™ã€‚",
        8: "ã‚ãªãŸã¯ã€Œè±Šã‹ã•ã®ä½“ç¾è€…ã€ã§ã™ã€‚ç¾å®Ÿä¸–ç•Œã§ç›®ã«è¦‹ãˆã‚‹æˆæœã‚„æˆåŠŸã‚’å¼•ãå¯„ã›ã‚‹ã€å¼·å¤§ãªãƒ‘ãƒ¯ãƒ¼ã¨æƒ…ç†±ã‚’ç§˜ã‚ã¦ã„ã¾ã™ã€‚",
        9: "ã‚ãªãŸã¯ã€Œæ…ˆæ„›ã®è³¢è€…ã€ã§ã™ã€‚ã™ã¹ã¦ã®è¦ç´ ã‚’å†…åŒ…ã—ã€é«˜ã„è¦–ç‚¹ã‹ã‚‰ä¸–ç•Œã‚’è¦‹æ¸¡ã™åºƒã„è¦–é‡ã¨ã€ä»–è€…ã‚’ç™’ã‚„ã™åŠ›ã‚’æŒã£ã¦ã„ã¾ã™ã€‚",
        11: "ã‚ãªãŸã¯ã€Œç›´æ„Ÿã®ãƒ¡ãƒƒã‚»ãƒ³ã‚¸ãƒ£ãƒ¼ã€ã§ã™ã€‚éå¸¸ã«å¼·ã„ã‚¹ãƒ”ãƒªãƒãƒ¥ã‚¢ãƒ«ãªæ„Ÿæ€§ã‚’æŒã¡ã€ç›®ã«è¦‹ãˆãªã„ä¸–ç•Œã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ã‘å–ã‚‹ã‚¢ãƒ³ãƒ†ãƒŠã‚’æŒã£ã¦ã„ã¾ã™ã€‚",
        22: "ã‚ãªãŸã¯ã€Œç†æƒ³ã®å®Ÿç¾è€…ã€ã§ã™ã€‚é«˜ã„ç†æƒ³ã‚’æ²ã’ã‚‹ã ã‘ã§ãªãã€ãã‚Œã‚’ç¾å®Ÿã®ä¸–ç•Œã§å½¢ã«ã™ã‚‹é¡ã¾ã‚Œãªã‚¹ã‚±ãƒ¼ãƒ«ã¨å®Ÿè¡ŒåŠ›ã‚’æŒã£ã¦ã„ã¾ã™ã€‚",
        33: "ã‚ãªãŸã¯ã€Œå®‡å®™ã®æ„›ã®å¥‰ä»•è€…ã€ã§ã™ã€‚è‡ªèº«ã®æå¾—ã‚’åº¦å¤–è¦–ã—ã¦äººé¡å…¨ä½“ã«ç„¡å„Ÿã®æ„›ã‚’æ³¨ãã€éå¸¸ã«ã‚¹ã‚±ãƒ¼ãƒ«ã®å¤§ããªé­‚ã§ã™ã€‚"
    };

    const colors = ["ãƒ©ãƒ”ã‚¹ãƒ©ã‚ºãƒª (ç‘ ç’ƒ)", "ã‚¢ãƒ¡ã‚¸ã‚¹ãƒˆ (ç´«)", "ã‚¨ãƒ¡ãƒ©ãƒ«ãƒ‰ (ç·‘)", "ãƒ«ãƒ“ãƒ¼ (çœŸç´…)", "ãƒ­ãƒ¼ã‚ºã‚¯ã‚©ãƒ¼ãƒ„ (æ¡œ)", "ã‚ªãƒ‹ã‚­ã‚¹ (æ¼†é»’)", "ãƒ‘ãƒ¼ãƒ« (çœŸç )", "ã‚´ãƒ¼ãƒ«ãƒ‰ (é»„é‡‘)", "ã‚µãƒ•ã‚¡ã‚¤ã‚¢ (è’¼)", "ã‚¿ãƒ¼ã‚³ã‚¤ã‚º (æ°´è‰²)"];
    const items = ["ã‚¢ãƒ³ãƒ†ã‚£ãƒ¼ã‚¯ã®éµ", "éŠ€ã®ç ‚æ™‚è¨ˆ", "å¤ã„æ´‹æ›¸", "æ˜Ÿã®ãƒšãƒ³ãƒ€ãƒ³ãƒˆ", "æ‰‹é¡", "ãƒãƒ¼ãƒ–ãƒ†ã‚£ãƒ¼", "ãŠæ°—ã«å…¥ã‚Šã®é¦™æ°´", "ä¸‡å¹´ç­†", "æ°´æ™¶ã®ãƒ–ãƒ¬ã‚¹ãƒ¬ãƒƒãƒˆ", "æœˆã‚’æ¨¡ã—ãŸãƒ©ãƒ³ãƒ—"];
    const directions = ["åŒ—", "åŒ—æ±", "æ±", "å—æ±", "å—", "å—è¥¿", "è¥¿", "åŒ—è¥¿"];

    const msgIntro = [
        "ç¾åœ¨ã€ã‚ãªãŸã®å‘¨å›²ã«ã¯ç©ã‚„ã‹ã§ç¥ç§˜çš„ãªæ˜Ÿã®æ°—ãŒæº€ã¡ã¦ã„ã¾ã™ã€‚",
        "é‹å‘½ã®è¼ªãŒé™ã‹ã«å›ã‚Šå§‹ã‚ã€ã‚ãªãŸã®é­‚ãŒæ–°ãŸãªãƒ•ã‚§ãƒ¼ã‚ºã¸ã¨ç§»è¡Œã—ã¤ã¤ã‚ã‚‹ã‚ˆã†ã§ã™ã€‚",
        "æ˜Ÿã€…ã®é…ç½®ãŒã€ã‚ãªãŸã®ä¸­ã«çœ ã‚‹éš ã•ã‚ŒãŸæ‰èƒ½ã‚’å‘¼ã³è¦šã¾ãã†ã¨ã—ã¦ã„ã¾ã™ã€‚",
        "éå»ã®çµŒé¨“ãŒç¾ã—ã„çµæ™¶ã¨ãªã‚Šã€ä»Šã®ã‚ãªãŸã‚’å¼·ãæ”¯ãˆã¦ã„ã‚‹ã®ãŒè¦‹ãˆã¾ã™ã€‚"
    ];
    const msgBody = [
        "ã“ã‚Œã¾ã§å°‘ã—æ»ã£ã¦ã„ãŸç‰©äº‹ãŒã€æ€ã„ãŒã‘ãªã„ãã£ã‹ã‘ã‹ã‚‰ã‚¹ãƒ ãƒ¼ã‚ºã«å‹•ãå‡ºã™æš—ç¤ºãŒå‡ºã¦ã„ã¾ã™ã€‚ãµã¨è€³ã«ã—ãŸè¨€è‘‰ã«é‡å¤§ãªãƒ’ãƒ³ãƒˆãŒéš ã•ã‚Œã¦ã„ã‚‹ã§ã—ã‚‡ã†ã€‚",
        "å¯¾äººé–¢ä¿‚ã«ãŠã„ã¦ã€ã‚ãªãŸã®èª å®Ÿãªæ…‹åº¦ãŒèª°ã‹ã®å¿ƒã‚’æ·±ãæ‰“ã¡ã€å¼·å›ºãªä¿¡é ¼é–¢ä¿‚ãŒçµã°ã‚Œã‚‹ç¬é–“ãŒè¨ªã‚Œã¾ã™ã€‚ç¬‘é¡”ã‚’å¤§åˆ‡ã«ã—ã¦ãã ã•ã„ã€‚",
        "ç›´æ„ŸãŒéå¸¸ã«é‹­ããªã£ã¦ã„ã¾ã™ã€‚è«–ç†çš„ãªæ€è€ƒã‚ˆã‚Šã‚‚ã€Œãªã‚“ã¨ãªãã“ã£ã¡ãŒè‰¯ã„æ°—ãŒã™ã‚‹ã€ã¨ã„ã†å¿ƒã®å£°ã«å¾“ã†ã“ã¨ã§ã€å¤§æ­£è§£ã‚’å¼•ãå¯„ã›ã¾ã™ã€‚",
        "å°‘ã—å¿˜ã‚Œã¦ã„ãŸæ˜”ã®å¤¢ã‚„ç›®æ¨™ã«ã€å†ã³æƒ…ç†±ã®ç«ãŒç¯ã‚‹å‡ºæ¥äº‹ãŒã‚ã‚Šãã†ã§ã™ã€‚è‡ªåˆ†è‡ªèº«ã®å¯èƒ½æ€§ã‚’ä¿¡ã˜ã¦ã‚ã’ã¦ãã ã•ã„ã€‚"
    ];
    const msgAdvice = [
        "ä»Šæ—¥ã¯ã€ã‚ãˆã¦ã€ã„ã¤ã‚‚ã¨ã¯é•ã†é¸æŠã€ã‚’ã—ã¦ã¿ã¦ãã ã•ã„ã€‚ãã‚ŒãŒå¹¸é‹ã¸ã®æœ€çŸ­ãƒ«ãƒ¼ãƒˆã¨ãªã‚Šã¾ã™ã€‚",
        "ç„¦ã‚Šã¯ç¦ç‰©ã§ã™ã€‚æ·±å‘¼å¸ã‚’ã—ã¦ã€è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã‚’ä¹±ã•ãªã„ã“ã¨ã ã‘ã‚’æ„è­˜ã—ã¦ä¸€æ—¥ã‚’éã”ã—ã¦ãã ã•ã„ã€‚",
        "èº«ã®å›ã‚Šã®ä¸è¦ãªã‚‚ã®ã‚’ä¸€ã¤æ‰‹æ”¾ã™ã“ã¨ã§ã€ãã“ã«æ–°ã—ã„è‰¯ã„é‹æ°—ãŒæµã‚Œè¾¼ã‚“ã§ãã¾ã™ã€‚æ•´ç†æ•´é “ãŒå‰ã§ã™ã€‚",
        "å‘¨å›²ã¸ã®æ„Ÿè¬ã®æ°—æŒã¡ã‚’ã€å¿ƒã®ä¸­ã§æ€ã†ã ã‘ã§ãªãã€ãã¡ã‚“ã¨è¨€è‘‰ã«ã—ã¦ä¼ãˆã‚‹ã“ã¨ã§é‹æ°—ã¯ã•ã‚‰ã«è·³ã­ä¸ŠãŒã‚Šã¾ã™ã€‚"
    ];

    // æ˜Ÿåº§è¨ˆç®—
    function getZodiac(month, day) {
        if ((month == 3 && day >= 21) || (month == 4 && day <= 19)) return "â™ˆ ç‰¡ç¾Šåº§";
        if ((month == 4 && day >= 20) || (month == 5 && day <= 20)) return "â™‰ ç‰¡ç‰›åº§";
        if ((month == 5 && day >= 21) || (month == 6 && day <= 21)) return "â™Š åŒå­åº§";
        if ((month == 6 && day >= 22) || (month == 7 && day <= 22)) return "â™‹ èŸ¹åº§";
        if ((month == 7 && day >= 23) || (month == 8 && day <= 22)) return "â™Œ ç…å­åº§";
        if ((month == 8 && day >= 23) || (month == 9 && day <= 22)) return "â™ ä¹™å¥³åº§";
        if ((month == 9 && day >= 23) || (month == 10 && day <= 23)) return "â™ å¤©ç§¤åº§";
        if ((month == 10 && day >= 24) || (month == 11 && day <= 22)) return "â™ è åº§";
        if ((month == 11 && day >= 23) || (month == 12 && day <= 21)) return "â™ å°„æ‰‹åº§";
        if ((month == 12 && day >= 22) || (month == 1 && day <= 19)) return "â™‘ å±±ç¾Šåº§";
        if ((month == 1 && day >= 20) || (month == 2 && day <= 18)) return "â™’ æ°´ç“¶åº§";
        return "â™“ é­šåº§";
    }

    // ã‚«ãƒãƒ©æ•°ç§˜è¡“ã«ã‚ˆã‚‹é‹å‘½æ•°è¨ˆç®—
    function calculateDestinyNumber(dob) {
        let numStr = dob.replace(/-/g, "");
        while (numStr.length > 1) {
            let sum = 0;
            for (let char of numStr) sum += parseInt(char);
            if (sum === 11 || sum === 22 || sum === 33) return sum;
            numStr = sum.toString();
        }
        return parseInt(numStr);
    }

    // --- ğŸ”®ãƒ¡ã‚¤ãƒ³å‡¦ç† ---
    function startOracle() {
        const name = document.getElementById("userName").value.trim();
        const dob = document.getElementById("userDob").value;

        if (!name || !dob) {
            alert("é­‚ã®è»Œè·¡ã‚’èª­ã¿è§£ããŸã‚ã€ãŠåå‰ã¨ç”Ÿå¹´æœˆæ—¥ã‚’ä¸¡æ–¹å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚");
            return;
        }

        document.getElementById("input-screen").style.display = "none";
        document.getElementById("loading").style.display = "block";
        window.scrollTo(0, 0);

        setTimeout(() => { showResult(name, dob); }, 2500);
    }

    function showResult(name, dob) {
        const dobDate = new Date(dob);
        const zodiac = getZodiac(dobDate.getMonth() + 1, dobDate.getDate());
        const destinyNum = calculateDestinyNumber(dob);
        const destinyText = destinyData[destinyNum] || destinyData[1];

        const today = new Date();
        const dateStr = `${today.getFullYear()}${today.getMonth() + 1}${today.getDate()}`;
        
        // ã‚·ãƒ¼ãƒ‰å€¤ç”Ÿæˆï¼ˆæ—¥æ›¿ã‚ã‚Šãƒ­ã‚¸ãƒƒã‚¯ï¼‰
        const seedStr = name + dob + dateStr;
        let seed = 0;
        for (let i = 0; i < seedStr.length; i++) seed = seedStr.charCodeAt(i) + ((seed << 5) - seed);
        seed = Math.abs(seed);
        function random() { let x = Math.sin(seed++) * 10000; return x - Math.floor(x); }

        // ã‚¹ã‚³ã‚¢è¨ˆç®— (40ã€œ100)
        const score = Math.floor(random() * 61) + 40; 
        let rank = "æœ«å‰";
        if (score >= 90) rank = "å¤§å‰";
        else if (score >= 75) rank = "ä¸­å‰";
        else if (score >= 60) rank = "å°å‰";
        else if (score >= 45) rank = "å‰";

        // ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼è¨ˆç®— (ã‚¹ã‚³ã‚¢åŸºæº–ã§ãƒ–ãƒ¬ã•ã›ã‚‹)
        const getParam = () => {
            let p = score + Math.floor(random() * 30) - 15;
            return p > 100 ? 100 : (p < 20 ? 20 : p);
        };
        const valLove = getParam();
        const valWork = getParam();
        const valMoney = getParam();
        const valHealth = getParam();

        // ç”»é¢ã«ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚»ãƒƒãƒˆ
        document.getElementById("resName").innerText = name + " æ§˜";
        document.getElementById("resZodiac").innerText = zodiac;
        document.getElementById("resDestinyNum").innerText = destinyNum;
        document.getElementById("resDestinyText").innerText = destinyText;

        document.getElementById("resDate").innerText = `${today.getMonth() + 1}æœˆ${today.getDate()}æ—¥`;
        document.getElementById("resRank").innerText = rank;
        
        document.getElementById("valLove").innerText = valLove + "%";
        document.getElementById("valWork").innerText = valWork + "%";
        document.getElementById("valMoney").innerText = valMoney + "%";
        document.getElementById("valHealth").innerText = valHealth + "%";

        document.getElementById("resColor").innerText = colors[Math.floor(random() * colors.length)];
        document.getElementById("resItem").innerText = items[Math.floor(random() * items.length)];
        document.getElementById("resNum").innerText = Math.floor(random() * 99) + 1;
        document.getElementById("resDir").innerText = directions[Math.floor(random() * directions.length)];

        const fullMsg = msgIntro[Math.floor(random() * msgIntro.length)] + "<br><br>" + 
                        msgBody[Math.floor(random() * msgBody.length)] + "<br><br>" + 
                        msgAdvice[Math.floor(random() * msgAdvice.length)];
        document.getElementById("resMessage").innerHTML = fullMsg;

        // ã‚²ãƒ¼ã‚¸åˆæœŸåŒ–
        document.getElementById("barLove").style.width = "0%";
        document.getElementById("barWork").style.width = "0%";
        document.getElementById("barMoney").style.width = "0%";
        document.getElementById("barHealth").style.width = "0%";

        // ç”»é¢åˆ‡ã‚Šæ›¿ãˆ
        document.getElementById("loading").style.display = "none";
        document.getElementById("result-screen").style.display = "block";

        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç™ºå‹•
        setTimeout(() => {
            document.getElementById("barLove").style.width = valLove + "%";
            document.getElementById("barWork").style.width = valWork + "%";
            document.getElementById("barMoney").style.width = valMoney + "%";
            document.getElementById("barHealth").style.width = valHealth + "%";
        }, 100);

        // ã‚¹ã‚³ã‚¢ã®ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—æ¼”å‡º
        let currentScore = 0;
        const scoreEl = document.getElementById("resScore");
        const timer = setInterval(() => {
            currentScore += 2;
            if (currentScore >= score) {
                currentScore = score;
                clearInterval(timer);
            }
            scoreEl.innerText = currentScore;
        }, 25);
    }

    function resetOracle() {
        document.getElementById("result-screen").style.display = "none";
        document.getElementById("input-screen").style.display = "block";
        window.scrollTo(0, 0);
    }
</script>
</body>
</html>
